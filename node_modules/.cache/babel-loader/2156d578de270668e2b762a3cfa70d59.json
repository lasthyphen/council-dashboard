{"ast":null,"code":"import _objectWithoutProperties from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled13 from\"styled-components\";import _styled12 from\"styled-components\";import _styled11 from\"styled-components\";import _styled10 from\"styled-components\";import _styled9 from\"styled-components\";import _styled8 from\"styled-components\";import _styled7 from\"styled-components\";import _styled6 from\"styled-components\";import _styled5 from\"styled-components\";import _styled4 from\"styled-components\";import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import React,{useCallback,useEffect,useState}from'react';import{Button,Checkbox,GU,Link,textStyle,useInside,useTheme,useViewport}from'@aragon/ui';import{useWallet}from'../../providers/Wallet';import{useInput}from'../../hooks/useInput';import IdentityBadge from'../IdentityBadge';import EmailInput from'./EmailInput';import{validateEmail}from'../../utils/validate-utils';import emailNotifcationIllustration from\"../../../src/assets/emailNotifications.svg\";var _StyledDiv=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv\",componentId:\"n9axmw-0\"})([\"display:flex;flex-direction:column;justify-content:center;padding-top:\",\"px;\"],function(p){return p._css;});var _StyledDiv2=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv2\",componentId:\"n9axmw-1\"})([\"display:flex;flex-direction:column;text-align:center;\"]);var _StyledDiv3=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv3\",componentId:\"n9axmw-2\"})([\"align-items:center;\"]);var _StyledSpan=_styled(\"span\").withConfig({displayName:\"EmailNotificationsForm___StyledSpan\",componentId:\"n9axmw-3\"})([\"\",\";margin-top:\",\"px;\"],function(p){return p._css2;},function(p){return p._css3;});var _StyledSpan2=_styled(\"span\").withConfig({displayName:\"EmailNotificationsForm___StyledSpan2\",componentId:\"n9axmw-4\"})([\"\",\";color:\",\";margin-top:\",\"px;\"],function(p){return p._css4;},function(p){return p._css5;},function(p){return p._css6;});var _StyledDiv4=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv4\",componentId:\"n9axmw-5\"})([\"margin-top:\",\"px;\"],function(p){return p._css7;});var _StyledP=_styled(\"p\").withConfig({displayName:\"EmailNotificationsForm___StyledP\",componentId:\"n9axmw-6\"})([\"color:\",\";\",\";text-align:left;height:0;margin-top:\",\"px;\"],function(p){return p._css8;},function(p){return p._css9;},function(p){return p._css10;});var _StyledDiv5=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv5\",componentId:\"n9axmw-7\"})([\"display:flex;justify-content:space-between;flex-direction:\",\";width:100%;margin-bottom:\",\"px;margin-top:\",\"px;\"],function(p){return p._css11;},function(p){return p._css12;},function(p){return p._css13;});var _StyledButton=_styled(Button).withConfig({displayName:\"EmailNotificationsForm___StyledButton\",componentId:\"n9axmw-8\"})([\"margin-top:\",\"px;\"],function(p){return p._css14;});function EmailNotificationsForm(_ref){var existingEmail=_ref.existingEmail,onOptOut=_ref.onOptOut,onSubscribeToNotifications=_ref.onSubscribeToNotifications;var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),termsAccepted=_useState4[0],setTermsAccepted=_useState4[1];var theme=useTheme();var _useWallet=useWallet(),account=_useWallet.account;var _useInside=useInside('NotificationsModal'),_useInside2=_slicedToArray(_useInside,1),insideModal=_useInside2[0];var _useViewport=useViewport(),below=_useViewport.below;var compactMode=below('medium');var _useInput=useInput(validateEmail),inputProps=_useInput.inputProps,status=_useInput.status;var emailInvalid=status==='invalid';var handleOnSubscribeToNotifications=useCallback(function(e){e.preventDefault();if(inputProps.value===existingEmail){setError('Email already exists.');return;}onSubscribeToNotifications(inputProps.value);},[onSubscribeToNotifications,existingEmail,inputProps.value]);var handleOnTermsChange=useCallback(function(){setTermsAccepted(!termsAccepted);},[setTermsAccepted,termsAccepted]);useEffect(function(){if(inputProps.value!==existingEmail){return setError('');}},[inputProps.value,existingEmail]);return React.createElement(_StyledDiv,{_css:insideModal?3:0*GU},React.createElement(_StyledDiv2,null,React.createElement(_StyledDiv3,null,React.createElement(\"img\",{src:emailNotifcationIllustration,width:\"141\",height:\"141\",alt:\"\"})),React.createElement(_StyledSpan,{_css2:textStyle('title2'),_css3:4*GU},existingEmail?\"Update \\\"\".concat(existingEmail,\"\\\"\"):'Stay up to date with email notifications'),React.createElement(_StyledSpan2,{_css4:textStyle('body2'),_css5:theme.surfaceContentSecondary,_css6:1.5*GU},existingEmail?React.createElement(React.Fragment,null,React.createElement(\"span\",null,\"Enter a new email address for your account\"),React.createElement(IdentityBadge,{entity:account,compact:true}),React.createElement(\"span\",null,\". We will continue sending email notifications to the current email address until you verify this new email address.\")):React.createElement(React.Fragment,null,React.createElement(\"span\",null,\"Associate an email address to your account \"),React.createElement(IdentityBadge,{entity:account,compact:true}),React.createElement(\"span\",null,\", so you can receive notifications for all Dijets Council events.\"))),React.createElement(_StyledDiv4,{_css7:5*GU},React.createElement(EmailInput,Object.assign({existingEmail:existingEmail,status:status},inputProps)),error&&React.createElement(\"div\",null,React.createElement(_StyledP,{_css8:theme.negative,_css9:textStyle('body4'),_css10:0.5*GU},error)))),React.createElement(LegalTermsAndPolicy,{termsAccepted:termsAccepted,onChange:handleOnTermsChange}),insideModal?React.createElement(_StyledDiv5,{_css11:compactMode?'column':'row',_css12:1.5*GU,_css13:3*GU},React.createElement(ActionButton,{compactMode:compactMode,onClick:onOptOut},\"No, thanks\"),React.createElement(ActionButton,{compactMode:compactMode,mode:\"strong\",type:\"submit\",disabled:emailInvalid||!termsAccepted,onClick:handleOnSubscribeToNotifications},\"Subscribe\")):React.createElement(_StyledButton,{mode:\"strong\",disabled:emailInvalid||!termsAccepted,onClick:handleOnSubscribeToNotifications,size:\"medium\",_css14:2.5*GU},existingEmail?'Update':'Subscribe to email notifications'));}var _StyledDiv6=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv6\",componentId:\"n9axmw-9\"})([\"margin-top:\",\"px;\"],function(p){return p._css15;});var _StyledDiv7=_styled(\"div\").withConfig({displayName:\"EmailNotificationsForm___StyledDiv7\",componentId:\"n9axmw-10\"})([\"display:flex;\"]);var _StyledSpan3=_styled(\"span\").withConfig({displayName:\"EmailNotificationsForm___StyledSpan3\",componentId:\"n9axmw-11\"})([\"\",\";color:#9096b6;margin-left:\",\"px;text-align:left;\"],function(p){return p._css16;},function(p){return p._css17;});var LegalTermsAndPolicy=React.memo(function LegalTermsAndPolicy(_ref2){var termsAccepted=_ref2.termsAccepted,onChange=_ref2.onChange;return React.createElement(_StyledDiv6,{_css15:3*GU},React.createElement(_StyledDiv7,null,React.createElement(\"div\",null,React.createElement(Checkbox,{checked:termsAccepted,onChange:onChange})),React.createElement(_StyledSpan3,{_css16:textStyle('body2'),_css17:1.5*GU},\"By continuing with your email, you agree to Dijets Council's\",' ',React.createElement(Link,{href:\"https://anj.aragon.org/legal/terms-general.pdf\"},\"legal terms\"),' ',\"and\",' ',React.createElement(Link,{href:\"https://portal.dijets.io/email-collection.md\"},\"email collection policy\"),\".\")));});var _StyledButton2=_styled(Button).withConfig({displayName:\"EmailNotificationsForm___StyledButton2\",componentId:\"n9axmw-12\"})([\"width:\",\";\"],function(p){return p._css18;});function ActionButton(_ref3){var compactMode=_ref3.compactMode,props=_objectWithoutProperties(_ref3,[\"compactMode\"]);return React.createElement(_StyledButton2,Object.assign({},props,{_css18:compactMode?'100%':\"calc((100% - \".concat(2*GU,\"px) /  2)\")}));}export default EmailNotificationsForm;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/EmailNotifications/EmailNotificationsForm.js"],"names":["React","useCallback","useEffect","useState","Button","Checkbox","GU","Link","textStyle","useInside","useTheme","useViewport","useWallet","useInput","IdentityBadge","EmailInput","validateEmail","EmailNotificationsForm","existingEmail","onOptOut","onSubscribeToNotifications","error","setError","termsAccepted","setTermsAccepted","theme","account","insideModal","below","compactMode","inputProps","status","emailInvalid","handleOnSubscribeToNotifications","e","preventDefault","value","handleOnTermsChange","emailNotifcationIllustration","surfaceContentSecondary","negative","LegalTermsAndPolicy","memo","onChange","ActionButton","props"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport {\n  Button,\n  Checkbox,\n  GU,\n  Link,\n  textStyle,\n  useInside,\n  useTheme,\n  useViewport,\n} from '@aragon/ui'\nimport { useWallet } from '../../providers/Wallet'\nimport { useInput } from '../../hooks/useInput'\nimport IdentityBadge from '../IdentityBadge'\nimport EmailInput from './EmailInput'\nimport { validateEmail } from '../../utils/validate-utils'\n\nimport emailNotifcationIllustration from '../../../src/assets/emailNotifications.svg'\n\nfunction EmailNotificationsForm({\n  existingEmail,\n  onOptOut,\n  onSubscribeToNotifications,\n}) {\n  const [error, setError] = useState()\n  const [termsAccepted, setTermsAccepted] = useState(false)\n\n  const theme = useTheme()\n  const { account } = useWallet()\n  const [insideModal] = useInside('NotificationsModal')\n  const { below } = useViewport()\n  const compactMode = below('medium')\n\n  const { inputProps, status } = useInput(validateEmail)\n\n  const emailInvalid = status === 'invalid'\n\n  const handleOnSubscribeToNotifications = useCallback(\n    e => {\n      e.preventDefault()\n      if (inputProps.value === existingEmail) {\n        setError('Email already exists.')\n        return\n      }\n      onSubscribeToNotifications(inputProps.value)\n    },\n    [onSubscribeToNotifications, existingEmail, inputProps.value]\n  )\n\n  const handleOnTermsChange = useCallback(() => {\n    setTermsAccepted(!termsAccepted)\n  }, [setTermsAccepted, termsAccepted])\n\n  useEffect(() => {\n    if (inputProps.value !== existingEmail) {\n      return setError('')\n    }\n  }, [inputProps.value, existingEmail])\n\n  return (\n    <div\n      css={`\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        padding-top: ${insideModal ? 3 : 0 * GU}px;\n      `}\n    >\n      <div\n        css={`\n          display: flex;\n          flex-direction: column;\n          text-align: center;\n        `}\n      >\n        <div\n          css={`\n            align-items: center;\n          `}\n        >\n          <img\n            src={emailNotifcationIllustration}\n            width=\"141\"\n            height=\"141\"\n            alt=\"\"\n          />\n        </div>\n        <span\n          css={`\n            ${textStyle('title2')};\n            margin-top: ${4 * GU}px;\n          `}\n        >\n          {existingEmail\n            ? `Update \"${existingEmail}\"`\n            : 'Stay up to date with email notifications'}\n        </span>\n\n        <span\n          css={`\n            ${textStyle('body2')};\n            color: ${theme.surfaceContentSecondary};\n            margin-top: ${1.5 * GU}px;\n          `}\n        >\n          {existingEmail ? (\n            <>\n              <span>Enter a new email address for your account</span>\n              <IdentityBadge entity={account} compact />\n              <span>\n                . We will continue sending email notifications to the current\n                email address until you verify this new email address.\n              </span>\n            </>\n          ) : (\n            <>\n              <span>Associate an email address to your account </span>\n              <IdentityBadge entity={account} compact />\n              <span>\n                , so you can receive notifications for all Dijets Council\n                events.\n              </span>\n            </>\n          )}\n        </span>\n\n        <div\n          css={`\n            margin-top: ${5 * GU}px;\n          `}\n        >\n          <EmailInput\n            existingEmail={existingEmail}\n            status={status}\n            {...inputProps}\n          />\n\n          {error && (\n            <div>\n              <p\n                css={`\n                  color: ${theme.negative};\n                  ${textStyle('body4')};\n                  text-align: left;\n                  height: 0;\n                  margin-top: ${0.5 * GU}px;\n                `}\n              >\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n      <LegalTermsAndPolicy\n        termsAccepted={termsAccepted}\n        onChange={handleOnTermsChange}\n      />\n\n      {insideModal ? (\n        <div\n          css={`\n            display: flex;\n            justify-content: space-between;\n            flex-direction: ${compactMode ? 'column' : 'row'};\n            width: 100%;\n            margin-bottom: ${1.5 * GU}px;\n            margin-top: ${3 * GU}px;\n          `}\n        >\n          <ActionButton compactMode={compactMode} onClick={onOptOut}>\n            No, thanks\n          </ActionButton>\n          <ActionButton\n            compactMode={compactMode}\n            mode=\"strong\"\n            type=\"submit\"\n            disabled={emailInvalid || !termsAccepted}\n            onClick={handleOnSubscribeToNotifications}\n          >\n            Subscribe\n          </ActionButton>\n        </div>\n      ) : (\n        <Button\n          css={`\n            margin-top: ${2.5 * GU}px;\n          `}\n          mode=\"strong\"\n          disabled={emailInvalid || !termsAccepted}\n          onClick={handleOnSubscribeToNotifications}\n          size=\"medium\"\n        >\n          {existingEmail ? 'Update' : 'Subscribe to email notifications'}\n        </Button>\n      )}\n    </div>\n  )\n}\n\nconst LegalTermsAndPolicy = React.memo(function LegalTermsAndPolicy({\n  termsAccepted,\n  onChange,\n}) {\n  return (\n    <div\n      css={`\n        margin-top: ${3 * GU}px;\n      `}\n    >\n      <div\n        css={`\n          display: flex;\n        `}\n      >\n        <div>\n          <Checkbox checked={termsAccepted} onChange={onChange} />\n        </div>\n        <span\n          css={`\n            ${textStyle('body2')};\n            color: #9096b6;\n            margin-left: ${1.5 * GU}px;\n            text-align: left;\n          `}\n        >\n          By continuing with your email, you agree to Dijets Council's{' '}\n          <Link href=\"https://anj.aragon.org/legal/terms-general.pdf\">\n            legal terms\n          </Link>{' '}\n          and{' '}\n          <Link href=\"https://portal.dijets.io/email-collection.md\">\n            email collection policy\n          </Link>\n          .\n        </span>\n      </div>\n    </div>\n  )\n})\n\nfunction ActionButton({ compactMode, ...props }) {\n  return (\n    <Button\n      css={`\n        width: ${compactMode ? '100%' : `calc((100% - ${2 * GU}px) /  2)`};\n      `}\n      {...props}\n    />\n  )\n}\n\nexport default EmailNotificationsForm\n"]},"metadata":{},"sourceType":"module"}