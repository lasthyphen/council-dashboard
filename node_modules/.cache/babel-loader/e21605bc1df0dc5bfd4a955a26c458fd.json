{"ast":null,"code":"import _styled7 from \"styled-components\";\nimport _styled6 from \"styled-components\";\nimport _styled5 from \"styled-components\";\nimport _styled4 from \"styled-components\";\nimport _styled3 from \"styled-components\";\nimport _styled2 from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Users/saleemfareed/oneds/court-dashboard/src/components/Activity/ActivityButton.js\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Spring, animated } from 'react-spring/renderprops';\nimport { ButtonIcon, IconAlert, Popover, GU, Tag, springs, useTheme } from '@aragon/ui';\nimport ActivityList from './ActivityList';\nimport { useActivity } from '../../providers/ActivityProvider';\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"ActivityButton___StyledDiv\",\n  componentId: \"cn9bh7-0\"\n})([\"width:\", \"px;display:flex;align-items:center;height:100%;outline:0;\"], p => p._css);\n\nvar _StyledButtonIcon = _styled(ButtonIcon).withConfig({\n  displayName: \"ActivityButton___StyledButtonIcon\",\n  componentId: \"cn9bh7-1\"\n})([\"height:100%;width:100%;border-radius:0;padding-left:\", \"px;justify-content:space-between;&:focus:after{right:\", \"px;}\"], p => p._css2, p => p._css3);\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"ActivityButton___StyledDiv2\",\n  componentId: \"cn9bh7-2\"\n})([\"position:relative;line-height:0;\"]);\n\nvar _StyledIconAlert = _styled(IconAlert).withConfig({\n  displayName: \"ActivityButton___StyledIconAlert\",\n  componentId: \"cn9bh7-3\"\n})([\"color:\", \";\"], p => p._css4);\n\nvar _StyledAnimatedDiv = _styled(animated.div).withConfig({\n  displayName: \"ActivityButton___StyledAnimatedDiv\",\n  componentId: \"cn9bh7-4\"\n})([\"position:absolute;top:-\", \"px;right:-\", \"px;\"], p => p._css5, p => p._css6);\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"ActivityButton___StyledDiv3\",\n  componentId: \"cn9bh7-5\"\n})([\"width:\", \"px;height:100%;\"], p => p._css7);\n\nvar _StyledDiv4 = _styled(\"div\").withConfig({\n  displayName: \"ActivityButton___StyledDiv4\",\n  componentId: \"cn9bh7-6\"\n})([\"outline:0\"]);\n\nconst ActivityButton = React.memo(function ActivityButton() {\n  const theme = useTheme();\n  const [opened, setOpened] = useState(false);\n  const {\n    activities,\n    markActivitiesRead,\n    unreadCount\n  } = useActivity();\n  const containerRef = useRef();\n  const popoverFocusElement = useRef();\n  const handleToggle = useCallback(() => setOpened(opened => {\n    if (opened) {\n      markActivitiesRead();\n    }\n\n    return !opened;\n  }), [markActivitiesRead]);\n  const handleClose = useCallback(() => {\n    markActivitiesRead();\n    setOpened(false);\n  }, [markActivitiesRead]);\n  useEffect(() => {\n    if (popoverFocusElement.current) {\n      popoverFocusElement.current.focus();\n    }\n  }, [activities]);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(_StyledDiv, {\n    ref: containerRef,\n    _css: 7.25 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(_StyledButtonIcon, {\n    element: \"div\",\n    onClick: handleToggle,\n    label: \"Transaction activity\",\n    _css2: 0.5 * GU,\n    _css3: 3 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(_StyledDiv2, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(_StyledIconAlert, {\n    _css4: theme.hint,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(Spring, {\n    native: true,\n    from: {\n      opacity: 0,\n      size: 0\n    },\n    to: {\n      opacity: Number(unreadCount > 0),\n      size: Number(unreadCount > 0)\n    },\n    config: springs.swift,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, ({\n    opacity,\n    size\n  }) => React.createElement(_StyledAnimatedDiv, {\n    style: {\n      opacity,\n      transform: size.interpolate([0, 0.2, 0.4, 0.6, 0.8, 1], [1.5, 1, 1.5, 1, 1.5, 1]).interpolate(s => `scale3d(${s}, ${s}, 1)`)\n    },\n    _css5: 0.5 * GU,\n    _css6: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(Tag, {\n    limitDigits: true,\n    mode: \"activity\",\n    label: unreadCount,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })))), React.createElement(_StyledDiv3, {\n    _css7: 3 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }))), React.createElement(Popover, {\n    closeOnOpenerFocus: true,\n    placement: \"bottom-end\",\n    onClose: handleClose,\n    visible: opened,\n    opener: containerRef.current,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(_StyledDiv4, {\n    ref: popoverFocusElement,\n    tabIndex: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(ActivityList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }))));\n});\nexport default ActivityButton;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/Activity/ActivityButton.js"],"names":["React","useCallback","useEffect","useRef","useState","Spring","animated","ButtonIcon","IconAlert","Popover","GU","Tag","springs","useTheme","ActivityList","useActivity","ActivityButton","memo","theme","opened","setOpened","activities","markActivitiesRead","unreadCount","containerRef","popoverFocusElement","handleToggle","handleClose","current","focus","hint","opacity","size","Number","swift","transform","interpolate","s"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { Spring, animated } from 'react-spring/renderprops'\nimport {\n  ButtonIcon,\n  IconAlert,\n  Popover,\n  GU,\n  Tag,\n  springs,\n  useTheme,\n} from '@aragon/ui'\nimport ActivityList from './ActivityList'\nimport { useActivity } from '../../providers/ActivityProvider'\n\nconst ActivityButton = React.memo(function ActivityButton() {\n  const theme = useTheme()\n  const [opened, setOpened] = useState(false)\n  const { activities, markActivitiesRead, unreadCount } = useActivity()\n  const containerRef = useRef()\n  const popoverFocusElement = useRef()\n\n  const handleToggle = useCallback(\n    () =>\n      setOpened(opened => {\n        if (opened) {\n          markActivitiesRead()\n        }\n        return !opened\n      }),\n    [markActivitiesRead]\n  )\n\n  const handleClose = useCallback(() => {\n    markActivitiesRead()\n    setOpened(false)\n  }, [markActivitiesRead])\n\n  useEffect(() => {\n    if (popoverFocusElement.current) {\n      popoverFocusElement.current.focus()\n    }\n  }, [activities])\n\n  return (\n    <React.Fragment>\n      <div\n        ref={containerRef}\n        css={`\n          width: ${7.25 * GU}px;\n          display: flex;\n          align-items: center;\n          height: 100%;\n          outline: 0;\n        `}\n      >\n        <ButtonIcon\n          element=\"div\"\n          onClick={handleToggle}\n          css={`\n            height: 100%;\n            width: 100%;\n            border-radius: 0;\n            padding-left: ${0.5 * GU}px;\n            justify-content: space-between;\n\n            /* This is a bit of a hack to get the focus ring to appear only\n             * around the button and not the spacer\n             */\n            &:focus:after {\n              right: ${3 * GU}px;\n            }\n          `}\n          label=\"Transaction activity\"\n        >\n          <div\n            css={`\n              position: relative;\n              line-height: 0;\n            `}\n          >\n            <IconAlert\n              css={`\n                color: ${theme.hint};\n              `}\n            />\n            <Spring\n              native\n              from={{ opacity: 0, size: 0 }}\n              to={{\n                opacity: Number(unreadCount > 0),\n                size: Number(unreadCount > 0),\n              }}\n              config={springs.swift}\n            >\n              {({ opacity, size }) => (\n                <animated.div\n                  style={{\n                    opacity,\n                    transform: size\n                      .interpolate(\n                        [0, 0.2, 0.4, 0.6, 0.8, 1],\n                        [1.5, 1, 1.5, 1, 1.5, 1]\n                      )\n                      .interpolate(s => `scale3d(${s}, ${s}, 1)`),\n                  }}\n                  css={`\n                    position: absolute;\n                    top: -${0.5 * GU}px;\n                    right: -${0.5 * GU}px;\n                  `}\n                >\n                  <Tag limitDigits mode=\"activity\" label={unreadCount} />\n                </animated.div>\n              )}\n            </Spring>\n          </div>\n          {/* Extend the width of the button to the edge of the top bar */}\n          <div\n            css={`\n              width: ${3 * GU}px;\n              height: 100%;\n            `}\n          />\n        </ButtonIcon>\n      </div>\n      <Popover\n        closeOnOpenerFocus\n        placement=\"bottom-end\"\n        onClose={handleClose}\n        visible={opened}\n        opener={containerRef.current}\n      >\n        <div ref={popoverFocusElement} tabIndex=\"0\" css=\"outline: 0\">\n          <ActivityList />\n        </div>\n      </Popover>\n    </React.Fragment>\n  )\n})\n\nexport default ActivityButton\n"]},"metadata":{},"sourceType":"module"}