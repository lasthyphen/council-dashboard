{"ast":null,"code":"let last, timeout;\n\nmodule.exports = (res, cb) => {\n  const values = [];\n  res.replace(/\\}[\\n\\r]?\\{/g, '}|--|{') // }{\n  .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{') // }][{\n  .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{') // }[{\n  .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{') // }]{\n  .split('|--|').forEach(data => {\n    if (last) data = last + data; // prepend the last chunk\n\n    let result;\n\n    try {\n      result = JSON.parse(data);\n    } catch (e) {\n      last = data;\n      clearTimeout(timeout); // restart timeout\n\n      timeout = setTimeout(() => cb(new Error('Parse response timeout')), 15 * 1000);\n      return;\n    }\n\n    clearTimeout(timeout);\n    last = null;\n    if (result) values.push(result);\n  });\n  cb(null, values);\n};","map":null,"metadata":{},"sourceType":"script"}