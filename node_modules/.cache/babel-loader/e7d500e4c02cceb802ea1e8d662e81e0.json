{"ast":null,"code":"import { useRef as r, useReducer as n, useEffect as e, useLayoutEffect as u } from \"react\";\nimport { makeSubject as t, subscribe as c } from \"wonka\";\nimport { unstable_scheduleCallback as o, unstable_getCurrentPriorityLevel as a, unstable_cancelCallback as l } from \"scheduler\";\n\nvar s = \"undefined\" == typeof window,\n    i = s ? e : u,\n    f = function f(r, n, e) {\n  return d(r, n, e)[0];\n},\n    d = function d(u, f, _d) {\n  var w = r({\n    subject: t(),\n    value: _d,\n    onValue: function onValue(r) {\n      w.current.value = r;\n    },\n    teardown: null,\n    task: null\n  }),\n      b = n(function (r, n) {\n    return w.current.value = n, r + 1;\n  }, 0)[1];\n\n  if (null === w.current.teardown) {\n    var v = c(function (r) {\n      return w.current.onValue(r);\n    })(u(w.current.subject.source)).unsubscribe;\n    w.current.subject.next(f), s ? v() : (w.current.teardown = v, w.current.task = o(a(), w.current.teardown));\n  }\n\n  function j() {\n    null !== w.current.teardown && w.current.teardown();\n  }\n\n  return i(function () {\n    return null !== w.current.task && l(w.current.task), j;\n  }, []), e(function () {\n    var r = w.current.onValue !== b;\n    w.current.onValue = b, null === w.current.teardown && (w.current.teardown = c(b)(u(w.current.subject.source)).unsubscribe), r || w.current.subject.next(f);\n  }, [f]), [w.current.value, w.current.subject.next];\n};\n\nexport { d as useOperator, f as useOperatorValue };","map":null,"metadata":{},"sourceType":"module"}