{"ast":null,"code":"import _styled13 from \"styled-components\";\nimport _styled12 from \"styled-components\";\nimport _styled11 from \"styled-components\";\nimport _styled10 from \"styled-components\";\nimport _styled9 from \"styled-components\";\nimport _styled8 from \"styled-components\";\nimport _styled7 from \"styled-components\";\nimport _styled6 from \"styled-components\";\nimport _styled5 from \"styled-components\";\nimport _styled4 from \"styled-components\";\nimport _styled3 from \"styled-components\";\nimport _styled2 from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Users/saleemfareed/oneds/court-dashboard/src/components/EmailNotifications/EmailNotificationsForm.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Checkbox, GU, Link, textStyle, useInside, useTheme, useViewport } from '@aragon/ui';\nimport { useWallet } from '../../providers/Wallet';\nimport { useInput } from '../../hooks/useInput';\nimport IdentityBadge from '../IdentityBadge';\nimport EmailInput from './EmailInput';\nimport { validateEmail } from '../../utils/validate-utils';\nimport emailNotifcationIllustration from \"../../../src/assets/emailNotifications.svg\";\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv\",\n  componentId: \"n9axmw-0\"\n})([\"display:flex;flex-direction:column;justify-content:center;padding-top:\", \"px;\"], p => p._css);\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv2\",\n  componentId: \"n9axmw-1\"\n})([\"display:flex;flex-direction:column;text-align:center;\"]);\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv3\",\n  componentId: \"n9axmw-2\"\n})([\"align-items:center;\"]);\n\nvar _StyledSpan = _styled(\"span\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledSpan\",\n  componentId: \"n9axmw-3\"\n})([\"\", \";margin-top:\", \"px;\"], p => p._css2, p => p._css3);\n\nvar _StyledSpan2 = _styled(\"span\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledSpan2\",\n  componentId: \"n9axmw-4\"\n})([\"\", \";color:\", \";margin-top:\", \"px;\"], p => p._css4, p => p._css5, p => p._css6);\n\nvar _StyledDiv4 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv4\",\n  componentId: \"n9axmw-5\"\n})([\"margin-top:\", \"px;\"], p => p._css7);\n\nvar _StyledP = _styled(\"p\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledP\",\n  componentId: \"n9axmw-6\"\n})([\"color:\", \";\", \";text-align:left;height:0;margin-top:\", \"px;\"], p => p._css8, p => p._css9, p => p._css10);\n\nvar _StyledDiv5 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv5\",\n  componentId: \"n9axmw-7\"\n})([\"display:flex;justify-content:space-between;flex-direction:\", \";width:100%;margin-bottom:\", \"px;margin-top:\", \"px;\"], p => p._css11, p => p._css12, p => p._css13);\n\nvar _StyledButton = _styled(Button).withConfig({\n  displayName: \"EmailNotificationsForm___StyledButton\",\n  componentId: \"n9axmw-8\"\n})([\"margin-top:\", \"px;\"], p => p._css14);\n\nfunction EmailNotificationsForm({\n  existingEmail,\n  onOptOut,\n  onSubscribeToNotifications\n}) {\n  const [error, setError] = useState();\n  const [termsAccepted, setTermsAccepted] = useState(false);\n  const theme = useTheme();\n  const {\n    account\n  } = useWallet();\n  const [insideModal] = useInside('NotificationsModal');\n  const {\n    below\n  } = useViewport();\n  const compactMode = below('medium');\n  const {\n    inputProps,\n    status\n  } = useInput(validateEmail);\n  const emailInvalid = status === 'invalid';\n  const handleOnSubscribeToNotifications = useCallback(e => {\n    e.preventDefault();\n\n    if (inputProps.value === existingEmail) {\n      setError('Email already exists.');\n      return;\n    }\n\n    onSubscribeToNotifications(inputProps.value);\n  }, [onSubscribeToNotifications, existingEmail, inputProps.value]);\n  const handleOnTermsChange = useCallback(() => {\n    setTermsAccepted(!termsAccepted);\n  }, [setTermsAccepted, termsAccepted]);\n  useEffect(() => {\n    if (inputProps.value !== existingEmail) {\n      return setError('');\n    }\n  }, [inputProps.value, existingEmail]);\n  return React.createElement(_StyledDiv, {\n    _css: insideModal ? 3 : 0 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(_StyledDiv2, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(_StyledDiv3, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: emailNotifcationIllustration,\n    width: \"141\",\n    height: \"141\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })), React.createElement(_StyledSpan, {\n    _css2: textStyle('title2'),\n    _css3: 4 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, existingEmail ? `Update \"${existingEmail}\"` : 'Stay up to date with email notifications'), React.createElement(_StyledSpan2, {\n    _css4: textStyle('body2'),\n    _css5: theme.surfaceContentSecondary,\n    _css6: 1.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, existingEmail ? React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Enter a new email address for your account\"), React.createElement(IdentityBadge, {\n    entity: account,\n    compact: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \". We will continue sending email notifications to the current email address until you verify this new email address.\")) : React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Associate an email address to your account \"), React.createElement(IdentityBadge, {\n    entity: account,\n    compact: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \", so you can receive notifications for all Dijets Council events.\"))), React.createElement(_StyledDiv4, {\n    _css7: 5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(EmailInput, Object.assign({\n    existingEmail: existingEmail,\n    status: status\n  }, inputProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  })), error && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(_StyledP, {\n    _css8: theme.negative,\n    _css9: textStyle('body4'),\n    _css10: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, error)))), React.createElement(LegalTermsAndPolicy, {\n    termsAccepted: termsAccepted,\n    onChange: handleOnTermsChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }), insideModal ? React.createElement(_StyledDiv5, {\n    _css11: compactMode ? 'column' : 'row',\n    _css12: 1.5 * GU,\n    _css13: 3 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(ActionButton, {\n    compactMode: compactMode,\n    onClick: onOptOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"No, thanks\"), React.createElement(ActionButton, {\n    compactMode: compactMode,\n    mode: \"strong\",\n    type: \"submit\",\n    disabled: emailInvalid || !termsAccepted,\n    onClick: handleOnSubscribeToNotifications,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"Subscribe\")) : React.createElement(_StyledButton, {\n    mode: \"strong\",\n    disabled: emailInvalid || !termsAccepted,\n    onClick: handleOnSubscribeToNotifications,\n    size: \"medium\",\n    _css14: 2.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, existingEmail ? 'Update' : 'Subscribe to email notifications'));\n}\n\nvar _StyledDiv6 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv6\",\n  componentId: \"n9axmw-9\"\n})([\"margin-top:\", \"px;\"], p => p._css15);\n\nvar _StyledDiv7 = _styled(\"div\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledDiv7\",\n  componentId: \"n9axmw-10\"\n})([\"display:flex;\"]);\n\nvar _StyledSpan3 = _styled(\"span\").withConfig({\n  displayName: \"EmailNotificationsForm___StyledSpan3\",\n  componentId: \"n9axmw-11\"\n})([\"\", \";color:#9096b6;margin-left:\", \"px;text-align:left;\"], p => p._css16, p => p._css17);\n\nconst LegalTermsAndPolicy = React.memo(function LegalTermsAndPolicy({\n  termsAccepted,\n  onChange\n}) {\n  return React.createElement(_StyledDiv6, {\n    _css15: 3 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(_StyledDiv7, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(Checkbox, {\n    checked: termsAccepted,\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  })), React.createElement(_StyledSpan3, {\n    _css16: textStyle('body2'),\n    _css17: 1.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"By continuing with your email, you agree to Dijets Council's\", ' ', React.createElement(Link, {\n    href: \"https://anj.aragon.org/legal/terms-general.pdf\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, \"legal terms\"), ' ', \"and\", ' ', React.createElement(Link, {\n    href: \"https://portal.dijets.io/email-collection.md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, \"email collection policy\"), \".\")));\n});\n\nvar _StyledButton2 = _styled(Button).withConfig({\n  displayName: \"EmailNotificationsForm___StyledButton2\",\n  componentId: \"n9axmw-12\"\n})([\"width:\", \";\"], p => p._css18);\n\nfunction ActionButton({\n  compactMode,\n  ...props\n}) {\n  return React.createElement(_StyledButton2, Object.assign({}, props, {\n    _css18: compactMode ? '100%' : `calc((100% - ${2 * GU}px) /  2)`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }));\n}\n\nexport default EmailNotificationsForm;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/EmailNotifications/EmailNotificationsForm.js"],"names":["React","useCallback","useEffect","useState","Button","Checkbox","GU","Link","textStyle","useInside","useTheme","useViewport","useWallet","useInput","IdentityBadge","EmailInput","validateEmail","EmailNotificationsForm","existingEmail","onOptOut","onSubscribeToNotifications","error","setError","termsAccepted","setTermsAccepted","theme","account","insideModal","below","compactMode","inputProps","status","emailInvalid","handleOnSubscribeToNotifications","e","preventDefault","value","handleOnTermsChange","emailNotifcationIllustration","surfaceContentSecondary","negative","LegalTermsAndPolicy","memo","onChange","ActionButton","props"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport {\n  Button,\n  Checkbox,\n  GU,\n  Link,\n  textStyle,\n  useInside,\n  useTheme,\n  useViewport,\n} from '@aragon/ui'\nimport { useWallet } from '../../providers/Wallet'\nimport { useInput } from '../../hooks/useInput'\nimport IdentityBadge from '../IdentityBadge'\nimport EmailInput from './EmailInput'\nimport { validateEmail } from '../../utils/validate-utils'\n\nimport emailNotifcationIllustration from '../../../src/assets/emailNotifications.svg'\n\nfunction EmailNotificationsForm({\n  existingEmail,\n  onOptOut,\n  onSubscribeToNotifications,\n}) {\n  const [error, setError] = useState()\n  const [termsAccepted, setTermsAccepted] = useState(false)\n\n  const theme = useTheme()\n  const { account } = useWallet()\n  const [insideModal] = useInside('NotificationsModal')\n  const { below } = useViewport()\n  const compactMode = below('medium')\n\n  const { inputProps, status } = useInput(validateEmail)\n\n  const emailInvalid = status === 'invalid'\n\n  const handleOnSubscribeToNotifications = useCallback(\n    e => {\n      e.preventDefault()\n      if (inputProps.value === existingEmail) {\n        setError('Email already exists.')\n        return\n      }\n      onSubscribeToNotifications(inputProps.value)\n    },\n    [onSubscribeToNotifications, existingEmail, inputProps.value]\n  )\n\n  const handleOnTermsChange = useCallback(() => {\n    setTermsAccepted(!termsAccepted)\n  }, [setTermsAccepted, termsAccepted])\n\n  useEffect(() => {\n    if (inputProps.value !== existingEmail) {\n      return setError('')\n    }\n  }, [inputProps.value, existingEmail])\n\n  return (\n    <div\n      css={`\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        padding-top: ${insideModal ? 3 : 0 * GU}px;\n      `}\n    >\n      <div\n        css={`\n          display: flex;\n          flex-direction: column;\n          text-align: center;\n        `}\n      >\n        <div\n          css={`\n            align-items: center;\n          `}\n        >\n          <img\n            src={emailNotifcationIllustration}\n            width=\"141\"\n            height=\"141\"\n            alt=\"\"\n          />\n        </div>\n        <span\n          css={`\n            ${textStyle('title2')};\n            margin-top: ${4 * GU}px;\n          `}\n        >\n          {existingEmail\n            ? `Update \"${existingEmail}\"`\n            : 'Stay up to date with email notifications'}\n        </span>\n\n        <span\n          css={`\n            ${textStyle('body2')};\n            color: ${theme.surfaceContentSecondary};\n            margin-top: ${1.5 * GU}px;\n          `}\n        >\n          {existingEmail ? (\n            <>\n              <span>Enter a new email address for your account</span>\n              <IdentityBadge entity={account} compact />\n              <span>\n                . We will continue sending email notifications to the current\n                email address until you verify this new email address.\n              </span>\n            </>\n          ) : (\n            <>\n              <span>Associate an email address to your account </span>\n              <IdentityBadge entity={account} compact />\n              <span>\n                , so you can receive notifications for all Dijets Council\n                events.\n              </span>\n            </>\n          )}\n        </span>\n\n        <div\n          css={`\n            margin-top: ${5 * GU}px;\n          `}\n        >\n          <EmailInput\n            existingEmail={existingEmail}\n            status={status}\n            {...inputProps}\n          />\n\n          {error && (\n            <div>\n              <p\n                css={`\n                  color: ${theme.negative};\n                  ${textStyle('body4')};\n                  text-align: left;\n                  height: 0;\n                  margin-top: ${0.5 * GU}px;\n                `}\n              >\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n      <LegalTermsAndPolicy\n        termsAccepted={termsAccepted}\n        onChange={handleOnTermsChange}\n      />\n\n      {insideModal ? (\n        <div\n          css={`\n            display: flex;\n            justify-content: space-between;\n            flex-direction: ${compactMode ? 'column' : 'row'};\n            width: 100%;\n            margin-bottom: ${1.5 * GU}px;\n            margin-top: ${3 * GU}px;\n          `}\n        >\n          <ActionButton compactMode={compactMode} onClick={onOptOut}>\n            No, thanks\n          </ActionButton>\n          <ActionButton\n            compactMode={compactMode}\n            mode=\"strong\"\n            type=\"submit\"\n            disabled={emailInvalid || !termsAccepted}\n            onClick={handleOnSubscribeToNotifications}\n          >\n            Subscribe\n          </ActionButton>\n        </div>\n      ) : (\n        <Button\n          css={`\n            margin-top: ${2.5 * GU}px;\n          `}\n          mode=\"strong\"\n          disabled={emailInvalid || !termsAccepted}\n          onClick={handleOnSubscribeToNotifications}\n          size=\"medium\"\n        >\n          {existingEmail ? 'Update' : 'Subscribe to email notifications'}\n        </Button>\n      )}\n    </div>\n  )\n}\n\nconst LegalTermsAndPolicy = React.memo(function LegalTermsAndPolicy({\n  termsAccepted,\n  onChange,\n}) {\n  return (\n    <div\n      css={`\n        margin-top: ${3 * GU}px;\n      `}\n    >\n      <div\n        css={`\n          display: flex;\n        `}\n      >\n        <div>\n          <Checkbox checked={termsAccepted} onChange={onChange} />\n        </div>\n        <span\n          css={`\n            ${textStyle('body2')};\n            color: #9096b6;\n            margin-left: ${1.5 * GU}px;\n            text-align: left;\n          `}\n        >\n          By continuing with your email, you agree to Dijets Council's{' '}\n          <Link href=\"https://anj.aragon.org/legal/terms-general.pdf\">\n            legal terms\n          </Link>{' '}\n          and{' '}\n          <Link href=\"https://portal.dijets.io/email-collection.md\">\n            email collection policy\n          </Link>\n          .\n        </span>\n      </div>\n    </div>\n  )\n})\n\nfunction ActionButton({ compactMode, ...props }) {\n  return (\n    <Button\n      css={`\n        width: ${compactMode ? '100%' : `calc((100% - ${2 * GU}px) /  2)`};\n      `}\n      {...props}\n    />\n  )\n}\n\nexport default EmailNotificationsForm\n"]},"metadata":{},"sourceType":"module"}