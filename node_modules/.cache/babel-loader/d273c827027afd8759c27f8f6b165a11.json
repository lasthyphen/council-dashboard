{"ast":null,"code":"import _slicedToArray from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled7 from\"styled-components\";import _styled6 from\"styled-components\";import _styled5 from\"styled-components\";import _styled4 from\"styled-components\";import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import React,{useCallback,useEffect,useRef,useState}from'react';import{Spring,animated}from'react-spring/renderprops';import{ButtonIcon,IconAlert,Popover,GU,Tag,springs,useTheme}from'@aragon/ui';import ActivityList from'./ActivityList';import{useActivity}from'../../providers/ActivityProvider';var _StyledDiv=_styled(\"div\").withConfig({displayName:\"ActivityButton___StyledDiv\",componentId:\"cn9bh7-0\"})([\"width:\",\"px;display:flex;align-items:center;height:100%;outline:0;\"],function(p){return p._css;});var _StyledButtonIcon=_styled(ButtonIcon).withConfig({displayName:\"ActivityButton___StyledButtonIcon\",componentId:\"cn9bh7-1\"})([\"height:100%;width:100%;border-radius:0;padding-left:\",\"px;justify-content:space-between;&:focus:after{right:\",\"px;}\"],function(p){return p._css2;},function(p){return p._css3;});var _StyledDiv2=_styled(\"div\").withConfig({displayName:\"ActivityButton___StyledDiv2\",componentId:\"cn9bh7-2\"})([\"position:relative;line-height:0;\"]);var _StyledIconAlert=_styled(IconAlert).withConfig({displayName:\"ActivityButton___StyledIconAlert\",componentId:\"cn9bh7-3\"})([\"color:\",\";\"],function(p){return p._css4;});var _StyledAnimatedDiv=_styled(animated.div).withConfig({displayName:\"ActivityButton___StyledAnimatedDiv\",componentId:\"cn9bh7-4\"})([\"position:absolute;top:-\",\"px;right:-\",\"px;\"],function(p){return p._css5;},function(p){return p._css6;});var _StyledDiv3=_styled(\"div\").withConfig({displayName:\"ActivityButton___StyledDiv3\",componentId:\"cn9bh7-5\"})([\"width:\",\"px;height:100%;background:\",\";\"],function(p){return p._css7;},function(p){return p._css8;});var _StyledDiv4=_styled(\"div\").withConfig({displayName:\"ActivityButton___StyledDiv4\",componentId:\"cn9bh7-6\"})([\"outline:0\"]);var ActivityButton=React.memo(function ActivityButton(){var theme=useTheme();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),opened=_useState2[0],setOpened=_useState2[1];var _useActivity=useActivity(),activities=_useActivity.activities,markActivitiesRead=_useActivity.markActivitiesRead,unreadCount=_useActivity.unreadCount;var containerRef=useRef();var popoverFocusElement=useRef();var handleToggle=useCallback(function(){return setOpened(function(opened){if(opened){markActivitiesRead();}return!opened;});},[markActivitiesRead]);var handleClose=useCallback(function(){markActivitiesRead();setOpened(false);},[markActivitiesRead]);useEffect(function(){if(popoverFocusElement.current){popoverFocusElement.current.focus();}},[activities]);return React.createElement(React.Fragment,null,React.createElement(_StyledDiv,{ref:containerRef,_css:7.25*GU},React.createElement(_StyledButtonIcon,{element:\"div\",onClick:handleToggle,label:\"Transaction activity\",_css2:0.5*GU,_css3:3*GU},React.createElement(_StyledDiv2,null,React.createElement(_StyledIconAlert,{_css4:theme.hint}),React.createElement(Spring,{native:true,from:{opacity:0,size:0},to:{opacity:Number(unreadCount>0),size:Number(unreadCount>0)},config:springs.swift},function(_ref){var opacity=_ref.opacity,size=_ref.size;return React.createElement(_StyledAnimatedDiv,{style:{opacity:opacity,transform:size.interpolate([0,0.2,0.4,0.6,0.8,1],[1.5,1,1.5,1,1.5,1]).interpolate(function(s){return\"scale3d(\".concat(s,\", \").concat(s,\", 1)\");})},_css5:0.5*GU,_css6:0.5*GU},React.createElement(Tag,{limitDigits:true,mode:\"activity\",label:unreadCount}));})),React.createElement(_StyledDiv3,{_css7:3*GU,_css8:theme.surface}))),React.createElement(Popover,{closeOnOpenerFocus:true,placement:\"bottom-end\",onClose:handleClose,visible:opened,opener:containerRef.current},React.createElement(_StyledDiv4,{ref:popoverFocusElement,tabIndex:\"0\"},React.createElement(ActivityList,null))));});export default ActivityButton;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/Activity/ActivityButton.js"],"names":["React","useCallback","useEffect","useRef","useState","Spring","animated","ButtonIcon","IconAlert","Popover","GU","Tag","springs","useTheme","ActivityList","useActivity","ActivityButton","memo","theme","opened","setOpened","activities","markActivitiesRead","unreadCount","containerRef","popoverFocusElement","handleToggle","handleClose","current","focus","hint","opacity","size","Number","swift","transform","interpolate","s","surface"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { Spring, animated } from 'react-spring/renderprops'\nimport {\n  ButtonIcon,\n  IconAlert,\n  Popover,\n  GU,\n  Tag,\n  springs,\n  useTheme,\n} from '@aragon/ui'\nimport ActivityList from './ActivityList'\nimport { useActivity } from '../../providers/ActivityProvider'\n\nconst ActivityButton = React.memo(function ActivityButton() {\n  const theme = useTheme()\n  const [opened, setOpened] = useState(false)\n  const { activities, markActivitiesRead, unreadCount } = useActivity()\n  const containerRef = useRef()\n  const popoverFocusElement = useRef()\n\n  const handleToggle = useCallback(\n    () =>\n      setOpened(opened => {\n        if (opened) {\n          markActivitiesRead()\n        }\n        return !opened\n      }),\n    [markActivitiesRead]\n  )\n\n  const handleClose = useCallback(() => {\n    markActivitiesRead()\n    setOpened(false)\n  }, [markActivitiesRead])\n\n  useEffect(() => {\n    if (popoverFocusElement.current) {\n      popoverFocusElement.current.focus()\n    }\n  }, [activities])\n\n  return (\n    <React.Fragment>\n      <div\n        ref={containerRef}\n        css={`\n          width: ${7.25 * GU}px;\n          display: flex;\n          align-items: center;\n          height: 100%;\n          outline: 0;\n        `}\n      >\n        <ButtonIcon\n          element=\"div\"\n          onClick={handleToggle}\n          css={`\n            height: 100%;\n            width: 100%;\n            border-radius: 0;\n            padding-left: ${0.5 * GU}px;\n            justify-content: space-between;\n\n            /* This is a bit of a hack to get the focus ring to appear only\n             * around the button and not the spacer\n             */\n            &:focus:after {\n              right: ${3 * GU}px;\n            }\n          `}\n          label=\"Transaction activity\"\n        >\n          <div\n            css={`\n              position: relative;\n              line-height: 0;\n            `}\n          >\n            <IconAlert\n              css={`\n                color: ${theme.hint};\n              `}\n            />\n            <Spring\n              native\n              from={{ opacity: 0, size: 0 }}\n              to={{\n                opacity: Number(unreadCount > 0),\n                size: Number(unreadCount > 0),\n              }}\n              config={springs.swift}\n            >\n              {({ opacity, size }) => (\n                <animated.div\n                  style={{\n                    opacity,\n                    transform: size\n                      .interpolate(\n                        [0, 0.2, 0.4, 0.6, 0.8, 1],\n                        [1.5, 1, 1.5, 1, 1.5, 1]\n                      )\n                      .interpolate(s => `scale3d(${s}, ${s}, 1)`),\n                  }}\n                  css={`\n                    position: absolute;\n                    top: -${0.5 * GU}px;\n                    right: -${0.5 * GU}px;\n                  `}\n                >\n                  <Tag limitDigits mode=\"activity\" label={unreadCount} />\n                </animated.div>\n              )}\n            </Spring>\n          </div>\n          {/* Extend the width of the button to the edge of the top bar */}\n          <div\n            css={`\n              width: ${3 * GU}px;\n              height: 100%;\n              background: ${theme.surface};\n            `}\n          />\n        </ButtonIcon>\n      </div>\n      <Popover\n        closeOnOpenerFocus\n        placement=\"bottom-end\"\n        onClose={handleClose}\n        visible={opened}\n        opener={containerRef.current}\n      >\n        <div ref={popoverFocusElement} tabIndex=\"0\" css=\"outline: 0\">\n          <ActivityList />\n        </div>\n      </Popover>\n    </React.Fragment>\n  )\n})\n\nexport default ActivityButton\n"]},"metadata":{},"sourceType":"module"}