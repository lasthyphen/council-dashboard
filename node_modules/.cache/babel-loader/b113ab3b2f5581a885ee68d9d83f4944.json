{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{courtServerEndpoint}from'../endpoints';import{FORBIDDEN_RESPONSE,UNAUTHORIZED_RESPONSE,USER_NOT_FOUND}from'./responseCodes';var COURT_SERVER_ENDPOINT=courtServerEndpoint();export function createSession(_x,_x2,_x3){return _createSession.apply(this,arguments);}function _createSession(){_createSession=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(address,signature,timestamp){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/sessions\");_context.prev=1;_context.next=4;return fetch(endpoint,{method:'POST',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({signature:signature,timestamp:timestamp})});case 4:rawResponse=_context.sent;_context.next=7;return rawResponse.json();case 7:jsonResponse=_context.sent;if(!rawResponse.ok){_context.next=10;break;}return _context.abrupt(\"return\",{authenticated:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.authenticated,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context.abrupt(\"return\",{error:errors});case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);console.error(_context.t0);return _context.abrupt(\"return\",{error:_context.t0});case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return _createSession.apply(this,arguments);}export function subscribeToNotifications(_x4,_x5){return _subscribeToNotifications.apply(this,arguments);}function _subscribeToNotifications(){_subscribeToNotifications=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address,email){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/email\");_context2.prev=1;_context2.next=4;return fetch(endpoint,{method:'PUT',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email})});case 4:rawResponse=_context2.sent;_context2.next=7;return rawResponse.json();case 7:jsonResponse=_context2.sent;if(!rawResponse.ok){_context2.next=10;break;}return _context2.abrupt(\"return\",{subscribedEmail:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.email,sent:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.sent,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context2.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);return _context2.abrupt(\"return\",{error:_context2.t0});case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[1,14]]);}));return _subscribeToNotifications.apply(this,arguments);}export function switchNotificationsStatus(_x6,_x7){return _switchNotificationsStatus.apply(this,arguments);}function _switchNotificationsStatus(){_switchNotificationsStatus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(address,disabled){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/notifications\");_context3.prev=1;_context3.next=4;return fetch(endpoint,{method:'PUT',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({disabled:disabled})});case 4:rawResponse=_context3.sent;_context3.next=7;return rawResponse.json();case 7:jsonResponse=_context3.sent;if(!rawResponse.ok){_context3.next=10;break;}return _context3.abrupt(\"return\",{disabled:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.disabled,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context3.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](1);console.error(_context3.t0);return _context3.abrupt(\"return\",{error:_context3.t0});case 18:case\"end\":return _context3.stop();}}},_callee3,null,[[1,14]]);}));return _switchNotificationsStatus.apply(this,arguments);}export function getJurorEmail(_x8){return _getJurorEmail.apply(this,arguments);}function _getJurorEmail(){_getJurorEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(address){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/email\");_context4.prev=1;_context4.next=4;return fetch(endpoint,{method:'GET',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'}});case 4:rawResponse=_context4.sent;_context4.next=7;return rawResponse.json();case 7:jsonResponse=_context4.sent;if(!rawResponse.ok){_context4.next=10;break;}return _context4.abrupt(\"return\",{email:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.email,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context4.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context4.prev=14;_context4.t0=_context4[\"catch\"](1);console.error(_context4.t0);return _context4.abrupt(\"return\",{error:_context4.t0});case 18:case\"end\":return _context4.stop();}}},_callee4,null,[[1,14]]);}));return _getJurorEmail.apply(this,arguments);}export function resendVerificationEmail(_x9){return _resendVerificationEmail.apply(this,arguments);}function _resendVerificationEmail(){_resendVerificationEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(address){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/email:resend\");_context5.prev=1;_context5.next=4;return fetch(endpoint,{method:'POST',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'}});case 4:rawResponse=_context5.sent;_context5.next=7;return rawResponse.json();case 7:jsonResponse=_context5.sent;if(!rawResponse.ok){_context5.next=10;break;}return _context5.abrupt(\"return\",{sent:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.sent,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context5.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context5.prev=14;_context5.t0=_context5[\"catch\"](1);console.error(_context5.t0);return _context5.abrupt(\"return\",{error:_context5.t0});case 18:case\"end\":return _context5.stop();}}},_callee5,null,[[1,14]]);}));return _resendVerificationEmail.apply(this,arguments);}export function subscribeExistingEmail(_x10){return _subscribeExistingEmail.apply(this,arguments);}function _subscribeExistingEmail(){_subscribeExistingEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(address){var _ref,email,error,needsSignature,_ref2,sent,errorReSending;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getJurorEmail(address);case 2:_ref=_context6.sent;email=_ref.email;error=_ref.error;needsSignature=_ref.needsSignature;if(!needsSignature){_context6.next=8;break;}return _context6.abrupt(\"return\",{needsSignature:needsSignature,email:email});case 8:if(!error){_context6.next=10;break;}return _context6.abrupt(\"return\",{error:error});case 10:_context6.next=12;return resendVerificationEmail(address);case 12:_ref2=_context6.sent;sent=_ref2.sent;errorReSending=_ref2.error;return _context6.abrupt(\"return\",{email:email,sent:sent,error:errorReSending});case 16:case\"end\":return _context6.stop();}}},_callee6);}));return _subscribeExistingEmail.apply(this,arguments);}export function deleteJurorEmail(_x11){return _deleteJurorEmail.apply(this,arguments);}function _deleteJurorEmail(){_deleteJurorEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(address){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/email\");_context7.prev=1;_context7.next=4;return fetch(endpoint,{method:'DELETE',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'}});case 4:rawResponse=_context7.sent;_context7.next=7;return rawResponse.json();case 7:jsonResponse=_context7.sent;if(!rawResponse.ok){_context7.next=10;break;}return _context7.abrupt(\"return\",{deleted:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.deleted,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context7.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context7.prev=14;_context7.t0=_context7[\"catch\"](1);console.error(_context7.t0);return _context7.abrupt(\"return\",{error:_context7.t0});case 18:case\"end\":return _context7.stop();}}},_callee7,null,[[1,14]]);}));return _deleteJurorEmail.apply(this,arguments);}export function deleteCurrentSession(_x12){return _deleteCurrentSession.apply(this,arguments);}function _deleteCurrentSession(){_deleteCurrentSession=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(address){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/sessions:current\");_context8.prev=1;_context8.next=4;return fetch(endpoint,{method:'DELETE',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'}});case 4:rawResponse=_context8.sent;_context8.next=7;return rawResponse.json();case 7:jsonResponse=_context8.sent;if(!rawResponse.ok){_context8.next=10;break;}return _context8.abrupt(\"return\",{deleted:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.deleted,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context8.abrupt(\"return\",{needsSignature:rawResponse.status===UNAUTHORIZED_RESPONSE||rawResponse.status===USER_NOT_FOUND||rawResponse.status===FORBIDDEN_RESPONSE,error:errors});case 14:_context8.prev=14;_context8.t0=_context8[\"catch\"](1);console.error(_context8.t0);return _context8.abrupt(\"return\",{error:_context8.t0});case 18:case\"end\":return _context8.stop();}}},_callee8,null,[[1,14]]);}));return _deleteCurrentSession.apply(this,arguments);}export function verifyJurorEmail(_x13,_x14){return _verifyJurorEmail.apply(this,arguments);}function _verifyJurorEmail(){_verifyJurorEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(address,token){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address,\"/email:verify\");_context9.prev=1;_context9.next=4;return fetch(endpoint,{method:'POST',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({token:token})});case 4:rawResponse=_context9.sent;_context9.next=7;return rawResponse.json();case 7:jsonResponse=_context9.sent;if(!rawResponse.ok){_context9.next=10;break;}return _context9.abrupt(\"return\",{verified:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.verified,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context9.abrupt(\"return\",{error:errors});case 14:_context9.prev=14;_context9.t0=_context9[\"catch\"](1);console.error(_context9.t0);return _context9.abrupt(\"return\",{error:_context9.t0});case 18:case\"end\":return _context9.stop();}}},_callee9,null,[[1,14]]);}));return _verifyJurorEmail.apply(this,arguments);}export function getSubscriptionDetails(_x15){return _getSubscriptionDetails.apply(this,arguments);}function _getSubscriptionDetails(){_getSubscriptionDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(address){var endpoint,rawResponse,jsonResponse,errors;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:endpoint=\"\".concat(COURT_SERVER_ENDPOINT,\"/users/\").concat(address);_context10.prev=1;_context10.next=4;return fetch(endpoint,{method:'GET',credentials:'include',headers:{Accept:'application/json','Content-Type':'application/json'}});case 4:rawResponse=_context10.sent;_context10.next=7;return rawResponse.json();case 7:jsonResponse=_context10.sent;if(!rawResponse.ok){_context10.next=10;break;}return _context10.abrupt(\"return\",{addressVerified:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.addressVerified,emailExists:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.emailExists,emailVerified:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.emailVerified,notificationsDisabled:jsonResponse===null||jsonResponse===void 0?void 0:jsonResponse.notificationsDisabled,error:null});case 10:errors=jsonResponse.errors.map(function(err){return Object.values(err).join(', ');}).join(', ');return _context10.abrupt(\"return\",{error:errors});case 14:_context10.prev=14;_context10.t0=_context10[\"catch\"](1);console.error(_context10.t0);return _context10.abrupt(\"return\",{error:_context10.t0});case 18:case\"end\":return _context10.stop();}}},_callee10,null,[[1,14]]);}));return _getSubscriptionDetails.apply(this,arguments);}","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/services/notificationServiceApi.js"],"names":["courtServerEndpoint","FORBIDDEN_RESPONSE","UNAUTHORIZED_RESPONSE","USER_NOT_FOUND","COURT_SERVER_ENDPOINT","createSession","address","signature","timestamp","endpoint","fetch","method","credentials","headers","Accept","body","JSON","stringify","rawResponse","json","jsonResponse","ok","authenticated","error","errors","map","err","Object","values","join","console","subscribeToNotifications","email","subscribedEmail","sent","needsSignature","status","switchNotificationsStatus","disabled","getJurorEmail","resendVerificationEmail","subscribeExistingEmail","errorReSending","deleteJurorEmail","deleted","deleteCurrentSession","verifyJurorEmail","token","verified","getSubscriptionDetails","addressVerified","emailExists","emailVerified","notificationsDisabled"],"mappings":"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","sourcesContent":["import { courtServerEndpoint } from '../endpoints'\nimport {\n  FORBIDDEN_RESPONSE,\n  UNAUTHORIZED_RESPONSE,\n  USER_NOT_FOUND,\n} from './responseCodes'\n\nconst COURT_SERVER_ENDPOINT = courtServerEndpoint()\n\nexport async function createSession(address, signature, timestamp) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/sessions`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ signature, timestamp }),\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        authenticated: jsonResponse?.authenticated,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function subscribeToNotifications(address, email) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/email`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'PUT',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email }),\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        subscribedEmail: jsonResponse?.email,\n        sent: jsonResponse?.sent,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function switchNotificationsStatus(address, disabled) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/notifications`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'PUT',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ disabled }),\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        disabled: jsonResponse?.disabled,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function getJurorEmail(address) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/email`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        email: jsonResponse?.email,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function resendVerificationEmail(address) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/email:resend`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        sent: jsonResponse?.sent,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function subscribeExistingEmail(address) {\n  const { email, error, needsSignature } = await getJurorEmail(address)\n\n  if (needsSignature) {\n    return { needsSignature, email }\n  }\n  if (error) {\n    return { error }\n  }\n  const { sent, error: errorReSending } = await resendVerificationEmail(address)\n\n  return { email, sent, error: errorReSending }\n}\n\nexport async function deleteJurorEmail(address) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/email`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        deleted: jsonResponse?.deleted,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function deleteCurrentSession(address) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/sessions:current`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        deleted: jsonResponse?.deleted,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      needsSignature:\n        rawResponse.status === UNAUTHORIZED_RESPONSE ||\n        rawResponse.status === USER_NOT_FOUND ||\n        rawResponse.status === FORBIDDEN_RESPONSE,\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function verifyJurorEmail(address, token) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}/email:verify`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ token }),\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        verified: jsonResponse?.verified,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n\nexport async function getSubscriptionDetails(address) {\n  const endpoint = `${COURT_SERVER_ENDPOINT}/users/${address}`\n\n  try {\n    const rawResponse = await fetch(endpoint, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const jsonResponse = await rawResponse.json()\n\n    if (rawResponse.ok) {\n      return {\n        addressVerified: jsonResponse?.addressVerified,\n        emailExists: jsonResponse?.emailExists,\n        emailVerified: jsonResponse?.emailVerified,\n        notificationsDisabled: jsonResponse?.notificationsDisabled,\n        error: null,\n      }\n    }\n\n    const errors = jsonResponse.errors\n      .map(err => Object.values(err).join(', '))\n      .join(', ')\n\n    return {\n      error: errors,\n    }\n  } catch (err) {\n    console.error(err)\n    return { error: err }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}