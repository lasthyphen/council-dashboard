{"ast":null,"code":"import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import React from'react';import{Button,GU,Info}from'@aragon/ui';import RequestSteps from'./Steps/RequestSteps';import{useWallet}from'../../providers/Wallet';import{getProviderFromUseWalletId}from'../../ethereum-providers';import{REQUEST_STATUS_FAILED,REQUEST_STATUS_PROCESSING_FAILED}from'./request-statuses';var _StyledDiv=_styled(\"div\").withConfig({displayName:\"RequestStatus___StyledDiv\",componentId:\"sc-13sivgf-0\"})([\"margin-top:\",\"px;\"],function(p){return p._css;});function RequestStatus(_ref){var allSuccess=_ref.allSuccess,lastProcessedAt=_ref.lastProcessedAt,maxAttemptsReached=_ref.maxAttemptsReached,onClosePanel=_ref.onClosePanel,onNextAttempt=_ref.onNextAttempt,requests=_ref.requests,requestStatus=_ref.requestStatus;var multipleRequests=requests.length>1;return React.createElement(\"div\",null,React.createElement(RequestSteps,{lastProcessedAt:lastProcessedAt,multipleRequests:multipleRequests,requests:requests,requestStatus:requestStatus}),React.createElement(_StyledDiv,{_css:2*GU},React.createElement(RequestStatusInfo,{allSuccess:allSuccess,multipleRequests:multipleRequests,maxAttemptsReached:maxAttemptsReached,onClosePanel:onClosePanel,onNextAttempt:onNextAttempt,requests:requests,requestStatus:requestStatus})));}var _StyledButton=_styled(Button).withConfig({displayName:\"RequestStatus___StyledButton\",componentId:\"sc-13sivgf-1\"})([\"margin-top:\",\"px;\"],function(p){return p._css2;});function RequestStatusInfo(_ref2){var allSuccess=_ref2.allSuccess,multipleRequests=_ref2.multipleRequests,maxAttemptsReached=_ref2.maxAttemptsReached,onClosePanel=_ref2.onClosePanel,onNextAttempt=_ref2.onNextAttempt,requests=_ref2.requests,requestStatus=_ref2.requestStatus;var _useWallet=useWallet(),activated=_useWallet.activated;var provider=getProviderFromUseWalletId(activated);if(allSuccess){return React.createElement(Info,null,\"Step\",multipleRequests?'s':'',\" processed successfully!\");}var requiresMultipleSignatures=multipleRequests&&requests.filter(function(request){return request.isTx;}).length>1;var requestFailedStatus=requestStatus.find(function(status){return[REQUEST_STATUS_PROCESSING_FAILED,REQUEST_STATUS_FAILED].includes(status);});if(requestFailedStatus){if(multipleRequests){return React.createElement(RequestReattempt,{maxAttemptsReached:maxAttemptsReached,onClosePanel:onClosePanel,onNextAttempt:onNextAttempt});}return React.createElement(React.Fragment,null,React.createElement(Info,null,requestFailedStatus===REQUEST_STATUS_PROCESSING_FAILED?\"This step wasn't processed correctly\":'This step failed'),React.createElement(_StyledButton,{label:\"Close\",mode:\"strong\",onClick:onClosePanel,wide:true,_css2:2*GU}));}if(multipleRequests){return React.createElement(Info,null,requiresMultipleSignatures?React.createElement(\"span\",null,\"These actions require multiple transactions. Please sign them one after another and \",React.createElement(\"strong\",null,\"do not close this window\"),\" until all of them are finished. Open \",provider.name,\" to sign the transactions.\"):React.createElement(\"span\",null,\"This action involves multiple steps. Please,\",' ',React.createElement(\"strong\",null,\"do not close this window\"),\" until all of them are finished.\"));}// If we get here means we have only one request\nreturn React.createElement(Info,null,requests[0].isTx?\"Open \".concat(provider.name,\" to sign the transaction\"):requests[0].description);}var _StyledButton2=_styled(Button).withConfig({displayName:\"RequestStatus___StyledButton2\",componentId:\"sc-13sivgf-2\"})([\"margin-top:\",\"px;\"],function(p){return p._css3;});var RequestReattempt=function RequestReattempt(_ref3){var maxAttemptsReached=_ref3.maxAttemptsReached,onClosePanel=_ref3.onClosePanel,onNextAttempt=_ref3.onNextAttempt;return React.createElement(React.Fragment,null,React.createElement(Info,null,maxAttemptsReached?\"It seems there's something wrong with this step\":\"An error occurred at this step. Don't worry, you can\\n             try to process this step again.\"),React.createElement(_StyledButton2,{label:maxAttemptsReached?'Close':\"OK, let's try again\",onClick:maxAttemptsReached?onClosePanel:onNextAttempt,mode:\"strong\",wide:true,_css3:2*GU}));};export default RequestStatus;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/RequestPanel/RequestStatus.js"],"names":["React","Button","GU","Info","RequestSteps","useWallet","getProviderFromUseWalletId","REQUEST_STATUS_FAILED","REQUEST_STATUS_PROCESSING_FAILED","RequestStatus","allSuccess","lastProcessedAt","maxAttemptsReached","onClosePanel","onNextAttempt","requests","requestStatus","multipleRequests","length","RequestStatusInfo","activated","provider","requiresMultipleSignatures","filter","request","isTx","requestFailedStatus","find","status","includes","name","description","RequestReattempt"],"mappings":"uHAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,EAAjB,CAAqBC,IAArB,KAAiC,YAAjC,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CACA,OAASC,SAAT,KAA0B,wBAA1B,CACA,OAASC,0BAAT,KAA2C,0BAA3C,CACA,OACEC,qBADF,CAEEC,gCAFF,KAGO,oBAHP,C,kKAKA,QAASC,CAAAA,aAAT,MAQG,IAPDC,CAAAA,UAOC,MAPDA,UAOC,CANDC,eAMC,MANDA,eAMC,CALDC,kBAKC,MALDA,kBAKC,CAJDC,YAIC,MAJDA,YAIC,CAHDC,aAGC,MAHDA,aAGC,CAFDC,QAEC,MAFDA,QAEC,CADDC,aACC,MADDA,aACC,CACD,GAAMC,CAAAA,gBAAgB,CAAGF,QAAQ,CAACG,MAAT,CAAkB,CAA3C,CAEA,MACE,gCACE,oBAAC,YAAD,EACE,eAAe,CAAEP,eADnB,CAEE,gBAAgB,CAAEM,gBAFpB,CAGE,QAAQ,CAAEF,QAHZ,CAIE,aAAa,CAAEC,aAJjB,EADF,CAOE,qCAEkB,EAAId,EAFtB,EAKE,oBAAC,iBAAD,EACE,UAAU,CAAEQ,UADd,CAEE,gBAAgB,CAAEO,gBAFpB,CAGE,kBAAkB,CAAEL,kBAHtB,CAIE,YAAY,CAAEC,YAJhB,CAKE,aAAa,CAAEC,aALjB,CAME,QAAQ,CAAEC,QANZ,CAOE,aAAa,CAAEC,aAPjB,EALF,CAPF,CADF,CAyBD,C,0KAED,QAASG,CAAAA,iBAAT,OAQG,IAPDT,CAAAA,UAOC,OAPDA,UAOC,CANDO,gBAMC,OANDA,gBAMC,CALDL,kBAKC,OALDA,kBAKC,CAJDC,YAIC,OAJDA,YAIC,CAHDC,aAGC,OAHDA,aAGC,CAFDC,QAEC,OAFDA,QAEC,CADDC,aACC,OADDA,aACC,gBACqBX,SAAS,EAD9B,CACOe,SADP,YACOA,SADP,CAED,GAAMC,CAAAA,QAAQ,CAAGf,0BAA0B,CAACc,SAAD,CAA3C,CAEA,GAAIV,UAAJ,CAAgB,CACd,MACE,qBAAC,IAAD,aAAWO,gBAAgB,CAAG,GAAH,CAAS,EAApC,4BADF,CAGD,CAED,GAAMK,CAAAA,0BAA0B,CAC9BL,gBAAgB,EAAIF,QAAQ,CAACQ,MAAT,CAAgB,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,IAAZ,EAAvB,EAAyCP,MAAzC,CAAkD,CADxE,CAEA,GAAMQ,CAAAA,mBAAmB,CAAGV,aAAa,CAACW,IAAd,CAAmB,SAAAC,MAAM,QACnD,CAACpB,gCAAD,CAAmCD,qBAAnC,EAA0DsB,QAA1D,CAAmED,MAAnE,CADmD,EAAzB,CAA5B,CAIA,GAAIF,mBAAJ,CAAyB,CACvB,GAAIT,gBAAJ,CAAsB,CACpB,MACE,qBAAC,gBAAD,EACE,kBAAkB,CAAEL,kBADtB,CAEE,YAAY,CAAEC,YAFhB,CAGE,aAAa,CAAEC,aAHjB,EADF,CAOD,CAED,MACE,yCACE,oBAAC,IAAD,MACGY,mBAAmB,GAAKlB,gCAAxB,CACG,sCADH,CAEG,kBAHN,CADF,CAME,mCAIE,KAAK,CAAC,OAJR,CAKE,IAAI,CAAC,QALP,CAME,OAAO,CAAEK,YANX,CAOE,IAAI,KAPN,OAEkB,EAAIX,EAFtB,EANF,CADF,CAkBD,CAED,GAAIe,gBAAJ,CAAsB,CACpB,MACE,qBAAC,IAAD,MACGK,0BAA0B,CACzB,uHAEoB,6DAFpB,0CAGkCD,QAAQ,CAACS,IAH3C,8BADyB,CAQzB,+EAC+C,GAD/C,CAEE,6DAFF,oCATJ,CADF,CAkBD,CAED;AACA,MACE,qBAAC,IAAD,MACGf,QAAQ,CAAC,CAAD,CAAR,CAAYU,IAAZ,gBACWJ,QAAQ,CAACS,IADpB,6BAEGf,QAAQ,CAAC,CAAD,CAAR,CAAYgB,WAHlB,CADF,CAOD,C,4KAED,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,OAInB,IAHJpB,CAAAA,kBAGI,OAHJA,kBAGI,CAFJC,YAEI,OAFJA,YAEI,CADJC,aACI,OADJA,aACI,CACJ,MACE,yCACE,oBAAC,IAAD,MACGF,kBAAkB,uJADrB,CADF,CAOE,oCAIE,KAAK,CAAEA,kBAAkB,CAAG,OAAH,CAAa,qBAJxC,CAKE,OAAO,CAAEA,kBAAkB,CAAGC,YAAH,CAAkBC,aAL/C,CAME,IAAI,CAAC,QANP,CAOE,IAAI,KAPN,OAEkB,EAAIZ,EAFtB,EAPF,CADF,CAmBD,CAxBD,CA0BA,cAAeO,CAAAA,aAAf","sourcesContent":["import React from 'react'\nimport { Button, GU, Info } from '@aragon/ui'\nimport RequestSteps from './Steps/RequestSteps'\nimport { useWallet } from '../../providers/Wallet'\nimport { getProviderFromUseWalletId } from '../../ethereum-providers'\nimport {\n  REQUEST_STATUS_FAILED,\n  REQUEST_STATUS_PROCESSING_FAILED,\n} from './request-statuses'\n\nfunction RequestStatus({\n  allSuccess,\n  lastProcessedAt,\n  maxAttemptsReached,\n  onClosePanel,\n  onNextAttempt,\n  requests,\n  requestStatus,\n}) {\n  const multipleRequests = requests.length > 1\n\n  return (\n    <div>\n      <RequestSteps\n        lastProcessedAt={lastProcessedAt}\n        multipleRequests={multipleRequests}\n        requests={requests}\n        requestStatus={requestStatus}\n      />\n      <div\n        css={`\n          margin-top: ${2 * GU}px;\n        `}\n      >\n        <RequestStatusInfo\n          allSuccess={allSuccess}\n          multipleRequests={multipleRequests}\n          maxAttemptsReached={maxAttemptsReached}\n          onClosePanel={onClosePanel}\n          onNextAttempt={onNextAttempt}\n          requests={requests}\n          requestStatus={requestStatus}\n        />\n      </div>\n    </div>\n  )\n}\n\nfunction RequestStatusInfo({\n  allSuccess,\n  multipleRequests,\n  maxAttemptsReached,\n  onClosePanel,\n  onNextAttempt,\n  requests,\n  requestStatus,\n}) {\n  const { activated } = useWallet()\n  const provider = getProviderFromUseWalletId(activated)\n\n  if (allSuccess) {\n    return (\n      <Info>Step{multipleRequests ? 's' : ''} processed successfully!</Info>\n    )\n  }\n\n  const requiresMultipleSignatures =\n    multipleRequests && requests.filter(request => request.isTx).length > 1\n  const requestFailedStatus = requestStatus.find(status =>\n    [REQUEST_STATUS_PROCESSING_FAILED, REQUEST_STATUS_FAILED].includes(status)\n  )\n\n  if (requestFailedStatus) {\n    if (multipleRequests) {\n      return (\n        <RequestReattempt\n          maxAttemptsReached={maxAttemptsReached}\n          onClosePanel={onClosePanel}\n          onNextAttempt={onNextAttempt}\n        />\n      )\n    }\n\n    return (\n      <>\n        <Info>\n          {requestFailedStatus === REQUEST_STATUS_PROCESSING_FAILED\n            ? \"This step wasn't processed correctly\"\n            : 'This step failed'}\n        </Info>\n        <Button\n          css={`\n            margin-top: ${2 * GU}px;\n          `}\n          label=\"Close\"\n          mode=\"strong\"\n          onClick={onClosePanel}\n          wide\n        />\n      </>\n    )\n  }\n\n  if (multipleRequests) {\n    return (\n      <Info>\n        {requiresMultipleSignatures ? (\n          <span>\n            These actions require multiple transactions. Please sign them one\n            after another and <strong>do not close this window</strong> until\n            all of them are finished. Open {provider.name} to sign the\n            transactions.\n          </span>\n        ) : (\n          <span>\n            This action involves multiple steps. Please,{' '}\n            <strong>do not close this window</strong> until all of them are\n            finished.\n          </span>\n        )}\n      </Info>\n    )\n  }\n\n  // If we get here means we have only one request\n  return (\n    <Info>\n      {requests[0].isTx\n        ? `Open ${provider.name} to sign the transaction`\n        : requests[0].description}\n    </Info>\n  )\n}\n\nconst RequestReattempt = ({\n  maxAttemptsReached,\n  onClosePanel,\n  onNextAttempt,\n}) => {\n  return (\n    <>\n      <Info>\n        {maxAttemptsReached\n          ? `It seems there's something wrong with this step`\n          : `An error occurred at this step. Don't worry, you can\n             try to process this step again.`}\n      </Info>\n      <Button\n        css={`\n          margin-top: ${2 * GU}px;\n        `}\n        label={maxAttemptsReached ? 'Close' : \"OK, let's try again\"}\n        onClick={maxAttemptsReached ? onClosePanel : onNextAttempt}\n        mode=\"strong\"\n        wide\n      />\n    </>\n  )\n}\n\nexport default RequestStatus\n"]},"metadata":{},"sourceType":"module"}