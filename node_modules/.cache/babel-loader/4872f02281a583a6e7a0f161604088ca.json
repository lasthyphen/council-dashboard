{"ast":null,"code":"import _styled4 from \"styled-components\";\nimport _styled3 from \"styled-components\";\nimport _styled2 from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Users/saleemfareed/oneds/court-dashboard/src/components/Dashboard/panels/ANJForm.js\";\nimport React, { useCallback, useState } from 'react';\nimport { Button, ButtonBase, Field, GU, Info, TextInput, useSidePanelFocusOnReady, useTheme } from '@aragon/ui';\nimport { useCourtConfig } from '../../../providers/CourtConfig';\nimport { parseUnits, formatUnits, bigNum } from '../../../lib/math-utils';\n\nvar _StyledField = _styled(Field).withConfig({\n  displayName: \"ANJForm___StyledField\",\n  componentId: \"sc-15npst5-0\"\n})([\"margin-bottom:\", \"px;\"], p => p._css);\n\nvar _StyledButtonBase = _styled(ButtonBase).withConfig({\n  displayName: \"ANJForm___StyledButtonBase\",\n  componentId: \"sc-15npst5-1\"\n})([\"margin-right:\", \"px;color:\", \";\"], p => p._css2, p => p._css3);\n\nvar _StyledInfo = _styled(Info).withConfig({\n  displayName: \"ANJForm___StyledInfo\",\n  componentId: \"sc-15npst5-2\"\n})([\"margin-bottom:\", \"px;\"], p => p._css4);\n\nvar _StyledButton = _styled(Button).withConfig({\n  displayName: \"ANJForm___StyledButton\",\n  componentId: \"sc-15npst5-3\"\n})([\"margin-bottom:\", \"px;\"], p => p._css5);\n\nconst ANJForm = React.memo(function ANJForm({\n  actionLabel,\n  maxAmount,\n  onDone,\n  onSubmit,\n  runParentValidation\n}) {\n  const [amount, setAmount] = useState({\n    value: '0',\n    valueBN: bigNum(0),\n    error: null\n  });\n  const theme = useTheme();\n  const {\n    anjToken\n  } = useCourtConfig();\n  const inputRef = useSidePanelFocusOnReady();\n  const handleEditMode = useCallback(editMode => {\n    setAmount(amount => ({ ...amount,\n      value: formatUnits(amount.valueBN, {\n        digits: anjToken.decimals,\n        commas: !editMode,\n        replaceZeroBy: editMode ? '' : '0',\n        precision: anjToken.decimals\n      })\n    }));\n  }, [anjToken.decimals]); // Change amount handler\n\n  const handleAmountChange = useCallback(event => {\n    const newAmount = event.target.value;\n    let newAmountBN;\n\n    try {\n      newAmountBN = parseUnits(newAmount, anjToken.decimals);\n    } catch (err) {\n      newAmountBN = bigNum(-1);\n    }\n\n    setAmount(amount => ({ ...amount,\n      value: newAmount,\n      valueBN: newAmountBN\n    }));\n  }, [anjToken.decimals]); // Max value selection handler\n\n  const handleOnSelectMaxValue = useCallback(() => {\n    setAmount(amount => ({ ...amount,\n      value: formatUnits(maxAmount, {\n        digits: anjToken.decimals,\n        precision: anjToken.decimals\n      }),\n      valueBN: maxAmount\n    }));\n  }, [anjToken.decimals, maxAmount]); // Form validation\n\n  const validateForm = useCallback(() => {\n    if (amount.valueBN.eq(0)) {\n      return 'Amount must not be zero';\n    }\n\n    if (amount.valueBN.eq(-1)) {\n      return 'Wrong amount format';\n    }\n\n    return runParentValidation(amount.valueBN);\n  }, [amount.valueBN, runParentValidation]); // Form submit\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const error = validateForm(amount.valueBN);\n\n    if (error) {\n      setAmount(amount => ({ ...amount,\n        error\n      }));\n      return;\n    }\n\n    setAmount(amount => ({ ...amount,\n      error: null\n    }));\n    onDone();\n    onSubmit(amount.valueBN);\n  };\n\n  const errorMessage = amount.error;\n  return React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(_StyledField, {\n    label: \"Amount\",\n    _css: 2 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    name: \"amount\",\n    wide: true,\n    onChange: handleAmountChange,\n    onFocus: () => handleEditMode(true),\n    onBlur: () => handleEditMode(false),\n    value: amount.value,\n    ref: inputRef,\n    required: true,\n    adornment: React.createElement(_StyledButtonBase, {\n      onClick: handleOnSelectMaxValue,\n      _css2: 1 * GU,\n      _css3: theme.accent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"MAX\"),\n    adornmentPosition: \"end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), errorMessage && React.createElement(_StyledInfo, {\n    mode: \"error\",\n    _css4: 2 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, errorMessage), React.createElement(_StyledButton, {\n    label: actionLabel,\n    mode: \"strong\",\n    type: \"submit\",\n    wide: true,\n    _css5: 1 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }));\n});\nexport default ANJForm;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/Dashboard/panels/ANJForm.js"],"names":["React","useCallback","useState","Button","ButtonBase","Field","GU","Info","TextInput","useSidePanelFocusOnReady","useTheme","useCourtConfig","parseUnits","formatUnits","bigNum","ANJForm","memo","actionLabel","maxAmount","onDone","onSubmit","runParentValidation","amount","setAmount","value","valueBN","error","theme","anjToken","inputRef","handleEditMode","editMode","digits","decimals","commas","replaceZeroBy","precision","handleAmountChange","event","newAmount","target","newAmountBN","err","handleOnSelectMaxValue","validateForm","eq","handleSubmit","preventDefault","errorMessage","accent"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport {\n  Button,\n  ButtonBase,\n  Field,\n  GU,\n  Info,\n  TextInput,\n  useSidePanelFocusOnReady,\n  useTheme,\n} from '@aragon/ui'\n\nimport { useCourtConfig } from '../../../providers/CourtConfig'\nimport { parseUnits, formatUnits, bigNum } from '../../../lib/math-utils'\n\nconst ANJForm = React.memo(function ANJForm({\n  actionLabel,\n  maxAmount,\n  onDone,\n  onSubmit,\n  runParentValidation,\n}) {\n  const [amount, setAmount] = useState({\n    value: '0',\n    valueBN: bigNum(0),\n    error: null,\n  })\n  const theme = useTheme()\n  const { anjToken } = useCourtConfig()\n  const inputRef = useSidePanelFocusOnReady()\n\n  const handleEditMode = useCallback(\n    editMode => {\n      setAmount(amount => ({\n        ...amount,\n        value: formatUnits(amount.valueBN, {\n          digits: anjToken.decimals,\n          commas: !editMode,\n          replaceZeroBy: editMode ? '' : '0',\n          precision: anjToken.decimals,\n        }),\n      }))\n    },\n    [anjToken.decimals]\n  )\n\n  // Change amount handler\n  const handleAmountChange = useCallback(\n    event => {\n      const newAmount = event.target.value\n      let newAmountBN\n\n      try {\n        newAmountBN = parseUnits(newAmount, anjToken.decimals)\n      } catch (err) {\n        newAmountBN = bigNum(-1)\n      }\n\n      setAmount(amount => ({\n        ...amount,\n        value: newAmount,\n        valueBN: newAmountBN,\n      }))\n    },\n    [anjToken.decimals]\n  )\n\n  // Max value selection handler\n  const handleOnSelectMaxValue = useCallback(() => {\n    setAmount(amount => ({\n      ...amount,\n      value: formatUnits(maxAmount, {\n        digits: anjToken.decimals,\n        precision: anjToken.decimals,\n      }),\n      valueBN: maxAmount,\n    }))\n  }, [anjToken.decimals, maxAmount])\n\n  // Form validation\n  const validateForm = useCallback(() => {\n    if (amount.valueBN.eq(0)) {\n      return 'Amount must not be zero'\n    }\n\n    if (amount.valueBN.eq(-1)) {\n      return 'Wrong amount format'\n    }\n\n    return runParentValidation(amount.valueBN)\n  }, [amount.valueBN, runParentValidation])\n\n  // Form submit\n  const handleSubmit = event => {\n    event.preventDefault()\n\n    const error = validateForm(amount.valueBN)\n    if (error) {\n      setAmount(amount => ({ ...amount, error }))\n      return\n    }\n\n    setAmount(amount => ({ ...amount, error: null }))\n\n    onDone()\n    onSubmit(amount.valueBN)\n  }\n\n  const errorMessage = amount.error\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Field\n        css={`\n          margin-bottom: ${2 * GU}px;\n        `}\n        label=\"Amount\"\n      >\n        <TextInput\n          name=\"amount\"\n          wide\n          onChange={handleAmountChange}\n          onFocus={() => handleEditMode(true)}\n          onBlur={() => handleEditMode(false)}\n          value={amount.value}\n          ref={inputRef}\n          required\n          adornment={\n            <ButtonBase\n              css={`\n                margin-right: ${1 * GU}px;\n                color: ${theme.accent};\n              `}\n              onClick={handleOnSelectMaxValue}\n            >\n              MAX\n            </ButtonBase>\n          }\n          adornmentPosition=\"end\"\n        />\n      </Field>\n      {errorMessage && (\n        <Info\n          css={`\n            margin-bottom: ${2 * GU}px;\n          `}\n          mode=\"error\"\n        >\n          {errorMessage}\n        </Info>\n      )}\n      <Button\n        css={`\n          margin-bottom: ${1 * GU}px;\n        `}\n        label={actionLabel}\n        mode=\"strong\"\n        type=\"submit\"\n        wide\n      />\n    </form>\n  )\n})\n\nexport default ANJForm\n"]},"metadata":{},"sourceType":"module"}