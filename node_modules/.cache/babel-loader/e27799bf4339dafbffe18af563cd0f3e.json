{"ast":null,"code":"import _styled4 from \"styled-components\";\nimport _styled3 from \"styled-components\";\nimport _styled2 from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Users/saleemfareed/oneds/court-dashboard/src/components/Disputes/actions/DisputeVoting.js\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Button, GU, Help, Info, useTheme, useViewport } from '@aragon/ui';\nimport { useActiveBalanceOfAt } from '../../../hooks/useCourtContracts';\nimport { useCourtConfig } from '../../../providers/CourtConfig';\nimport { useWallet } from '../../../providers/Wallet';\nimport { VOTE_OPTION_REFUSE, VOTE_OPTION_IN_FAVOR, VOTE_OPTION_AGAINST } from '../../../utils/crvoting-utils';\n\nfunction DisputeVoting({\n  draftTermId,\n  isFinalRound,\n  isJurorDrafted,\n  onRequestCommit\n}) {\n  if (isFinalRound) {\n    return React.createElement(VotingFinalRound, {\n      draftTermId: draftTermId,\n      onRequestCommit: onRequestCommit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(VotingActions, {\n    canJurorVote: isJurorDrafted,\n    onRequestCommit: onRequestCommit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  });\n}\n\nfunction VotingFinalRound({\n  draftTermId,\n  onRequestCommit\n}) {\n  const wallet = useWallet();\n  const {\n    minActiveBalance\n  } = useCourtConfig(); // On a final round we must check if the connected account had the minimum active balance at term `disputeDraftTermId` to be able to vote\n  // Note that in a final round, every juror can vote (there's no drafting phase).\n\n  const [activeBalance] = useActiveBalanceOfAt(wallet.account, draftTermId);\n  const canJurorVoteFinalRound = activeBalance.gte(minActiveBalance);\n  return React.createElement(VotingActions, {\n    canJurorVote: canJurorVoteFinalRound,\n    onRequestCommit: onRequestCommit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  });\n}\n\nvar _StyledDiv = styled(\"div\").withConfig({\n  displayName: \"DisputeVoting___StyledDiv\",\n  componentId: \"sc-5cibbh-0\"\n})([\"display:flex;justify-content:space-between;flex-direction:\", \";width:100%;margin-bottom:\", \"px;\"], p => p._css, p => p._css2);\n\nfunction VotingActions({\n  canJurorVote,\n  onRequestCommit\n}) {\n  const wallet = useWallet();\n  const {\n    below\n  } = useViewport();\n  const compactMode = below('medium');\n  const buttonWidth = compactMode ? '100% ' : `calc((100% - ${2 * GU}px) /  3)`;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(_StyledDiv, {\n    _css: compactMode ? 'column' : 'row',\n    _css2: 1.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(VotingButton, {\n    compactMode: compactMode,\n    disabled: !canJurorVote,\n    mode: \"positive\",\n    onClick: () => onRequestCommit(VOTE_OPTION_IN_FAVOR),\n    width: buttonWidth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Allow action\"), React.createElement(VotingButton, {\n    compactMode: compactMode,\n    disabled: !canJurorVote,\n    mode: \"negative\",\n    onClick: () => onRequestCommit(VOTE_OPTION_AGAINST),\n    width: buttonWidth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Block action\"), React.createElement(VotingButton, {\n    compactMode: compactMode,\n    disabled: !canJurorVote,\n    onClick: () => onRequestCommit(VOTE_OPTION_REFUSE),\n    width: buttonWidth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Refuse to vote\")), React.createElement(RefuseToVoteHint, {\n    compactMode: compactMode,\n    width: buttonWidth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(Info, {\n    mode: canJurorVote ? 'description' : 'warning',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, (() => {\n    if (!wallet.account) return 'You cannot vote on this dispute because your Ethereum account is not connected.';\n    return canJurorVote ? ' You will be asked a one-time-use code before you can commit your vote.' : 'You cannot vote on this dispute with the current enabled address.';\n  })()));\n}\n\nvar _StyledDiv2 = styled(\"div\").withConfig({\n  displayName: \"DisputeVoting___StyledDiv2\",\n  componentId: \"sc-5cibbh-1\"\n})([\"display:flex;align-items:center;justify-content:\", \";margin-bottom:\", \"px;\"], p => p._css3, p => p._css4);\n\nvar _StyledDiv3 = styled(\"div\").withConfig({\n  displayName: \"DisputeVoting___StyledDiv3\",\n  componentId: \"sc-5cibbh-2\"\n})([\"width:\", \";color:\", \";\"], p => p._css5, p => p._css6);\n\nvar _StyledSpan = styled(\"span\").withConfig({\n  displayName: \"DisputeVoting___StyledSpan\",\n  componentId: \"sc-5cibbh-3\"\n})([\"margin-right:\", \"px;\"], p => p._css7);\n\nconst RefuseToVoteHint = ({\n  compactMode,\n  width\n}) => {\n  const theme = useTheme();\n  return React.createElement(_StyledDiv2, {\n    _css3: compactMode ? 'center' : 'flex-end',\n    _css4: 1.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(_StyledDiv3, {\n    _css5: width,\n    _css6: theme.help,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(Container, {\n    as: compactMode ? 'label' : 'div',\n    compactMode: compactMode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(_StyledSpan, {\n    _css7: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Why refuse to vote?\"), React.createElement(Help, {\n    hint: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"You can refuse to vote for many reasons, for example if you consider that the evidence was not conclusive enough or the description was incoherent.\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"Remember that you should vote the way that you think the plurality of jurors will vote, since you will be penalized if your vote is in the minority.\")))));\n};\n\nconst VotingButton = styled(Button).withConfig({\n  displayName: \"DisputeVoting__VotingButton\",\n  componentId: \"sc-5cibbh-4\"\n})([\"width:\", \";margin-bottom:\", \"px;\"], ({\n  width\n}) => width, ({\n  compactMode\n}) => (compactMode ? 1 : 0) * GU);\nconst Container = styled.div.withConfig({\n  displayName: \"DisputeVoting__Container\",\n  componentId: \"sc-5cibbh-5\"\n})([\"display:flex;align-items:center;justify-content:center;cursor:\", \";\"], ({\n  compactMode\n}) => compactMode ? 'pointer' : '');\nexport default DisputeVoting;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/Disputes/actions/DisputeVoting.js"],"names":["React","styled","Button","GU","Help","Info","useTheme","useViewport","useActiveBalanceOfAt","useCourtConfig","useWallet","VOTE_OPTION_REFUSE","VOTE_OPTION_IN_FAVOR","VOTE_OPTION_AGAINST","DisputeVoting","draftTermId","isFinalRound","isJurorDrafted","onRequestCommit","VotingFinalRound","wallet","minActiveBalance","activeBalance","account","canJurorVoteFinalRound","gte","VotingActions","canJurorVote","below","compactMode","buttonWidth","RefuseToVoteHint","width","theme","help","VotingButton","Container","div"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { Button, GU, Help, Info, useTheme, useViewport } from '@aragon/ui'\nimport { useActiveBalanceOfAt } from '../../../hooks/useCourtContracts'\nimport { useCourtConfig } from '../../../providers/CourtConfig'\nimport { useWallet } from '../../../providers/Wallet'\nimport {\n  VOTE_OPTION_REFUSE,\n  VOTE_OPTION_IN_FAVOR,\n  VOTE_OPTION_AGAINST,\n} from '../../../utils/crvoting-utils'\n\nfunction DisputeVoting({\n  draftTermId,\n  isFinalRound,\n  isJurorDrafted,\n  onRequestCommit,\n}) {\n  if (isFinalRound) {\n    return (\n      <VotingFinalRound\n        draftTermId={draftTermId}\n        onRequestCommit={onRequestCommit}\n      />\n    )\n  }\n\n  return (\n    <VotingActions\n      canJurorVote={isJurorDrafted}\n      onRequestCommit={onRequestCommit}\n    />\n  )\n}\n\nfunction VotingFinalRound({ draftTermId, onRequestCommit }) {\n  const wallet = useWallet()\n  const { minActiveBalance } = useCourtConfig()\n\n  // On a final round we must check if the connected account had the minimum active balance at term `disputeDraftTermId` to be able to vote\n  // Note that in a final round, every juror can vote (there's no drafting phase).\n  const [activeBalance] = useActiveBalanceOfAt(wallet.account, draftTermId)\n\n  const canJurorVoteFinalRound = activeBalance.gte(minActiveBalance)\n\n  return (\n    <VotingActions\n      canJurorVote={canJurorVoteFinalRound}\n      onRequestCommit={onRequestCommit}\n    />\n  )\n}\n\nfunction VotingActions({ canJurorVote, onRequestCommit }) {\n  const wallet = useWallet()\n  const { below } = useViewport()\n  const compactMode = below('medium')\n\n  const buttonWidth = compactMode ? '100% ' : `calc((100% - ${2 * GU}px) /  3)`\n\n  return (\n    <div>\n      <div\n        css={`\n          display: flex;\n          justify-content: space-between;\n          flex-direction: ${compactMode ? 'column' : 'row'};\n          width: 100%;\n          margin-bottom: ${1.5 * GU}px;\n        `}\n      >\n        <VotingButton\n          compactMode={compactMode}\n          disabled={!canJurorVote}\n          mode=\"positive\"\n          onClick={() => onRequestCommit(VOTE_OPTION_IN_FAVOR)}\n          width={buttonWidth}\n        >\n          Allow action\n        </VotingButton>\n        <VotingButton\n          compactMode={compactMode}\n          disabled={!canJurorVote}\n          mode=\"negative\"\n          onClick={() => onRequestCommit(VOTE_OPTION_AGAINST)}\n          width={buttonWidth}\n        >\n          Block action\n        </VotingButton>\n\n        <VotingButton\n          compactMode={compactMode}\n          disabled={!canJurorVote}\n          onClick={() => onRequestCommit(VOTE_OPTION_REFUSE)}\n          width={buttonWidth}\n        >\n          Refuse to vote\n        </VotingButton>\n      </div>\n      <RefuseToVoteHint compactMode={compactMode} width={buttonWidth} />\n      <Info mode={canJurorVote ? 'description' : 'warning'}>\n        {(() => {\n          if (!wallet.account)\n            return 'You cannot vote on this dispute because your Ethereum account is not connected.'\n\n          return canJurorVote\n            ? ' You will be asked a one-time-use code before you can commit your vote.'\n            : 'You cannot vote on this dispute with the current enabled address.'\n        })()}\n      </Info>\n    </div>\n  )\n}\n\nconst RefuseToVoteHint = ({ compactMode, width }) => {\n  const theme = useTheme()\n\n  return (\n    <div\n      css={`\n        display: flex;\n        align-items: center;\n        justify-content: ${compactMode ? 'center' : 'flex-end'};\n        margin-bottom: ${1.5 * GU}px;\n      `}\n    >\n      <div\n        css={`\n          width: ${width};\n          color: ${theme.help};\n        `}\n      >\n        <Container as={compactMode ? 'label' : 'div'} compactMode={compactMode}>\n          <span\n            css={`\n              margin-right: ${0.5 * GU}px;\n            `}\n          >\n            Why refuse to vote?\n          </span>\n          <Help hint=\"\">\n            <p>\n              You can refuse to vote for many reasons, for example if you\n              consider that the evidence was not conclusive enough or the\n              description was incoherent.\n            </p>\n            <p>\n              Remember that you should vote the way that you think the plurality\n              of jurors will vote, since you will be penalized if your vote is\n              in the minority.\n            </p>\n          </Help>\n        </Container>\n      </div>\n    </div>\n  )\n}\n\nconst VotingButton = styled(Button)`\n  width: ${({ width }) => width};\n  margin-bottom: ${({ compactMode }) => (compactMode ? 1 : 0) * GU}px;\n`\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: ${({ compactMode }) => (compactMode ? 'pointer' : '')};\n`\n\nexport default DisputeVoting\n"]},"metadata":{},"sourceType":"module"}