{"ast":null,"code":"import _styled20 from \"styled-components\";\nimport _styled19 from \"styled-components\";\nimport _styled18 from \"styled-components\";\nimport _styled17 from \"styled-components\";\nimport _styled16 from \"styled-components\";\nimport _styled15 from \"styled-components\";\nimport _styled14 from \"styled-components\";\nimport _styled13 from \"styled-components\";\nimport _styled12 from \"styled-components\";\nimport _styled11 from \"styled-components\";\nimport _styled10 from \"styled-components\";\nimport _styled9 from \"styled-components\";\nimport _styled8 from \"styled-components\";\nimport _styled7 from \"styled-components\";\nimport _styled6 from \"styled-components\";\nimport _styled5 from \"styled-components\";\nimport _styled4 from \"styled-components\";\nimport _styled3 from \"styled-components\";\nimport _styled2 from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/Users/saleemfareed/oneds/court-dashboard/src/components/ClockModule.js\";\nimport React, { useCallback, useRef, useState } from 'react';\nimport { blockExplorerUrl, Button, ButtonBase, GU, IconCheck, IconClock, IconCross, IconExternal, textStyle, Timer, useTheme } from '@aragon/ui';\nimport { useWallet } from 'use-wallet';\nimport HeaderModule from './Header/HeaderModule';\nimport HeaderPopover from './Header/HeaderPopover';\nimport { useCourtClock } from '../providers/CourtClock';\nimport { useCourtConfig } from '../providers/CourtConfig';\nimport { useHeartbeat } from '../hooks/useCourtContracts';\nimport { formatDuration } from '../utils/date-utils';\nimport { getNetworkType, isLocalOrUnknownNetwork, shortenAddress } from '../lib/web3-utils';\nimport logoSvg from \"../assets/LogoAccent.svg\";\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv\",\n  componentId: \"ocgq3-0\"\n})([\"display:flex;align-items:center;justify-content:space-around;outline:0;\"]);\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv2\",\n  componentId: \"ocgq3-1\"\n})([\"background-color:\", \";display:flex;border-radius:50%;padding:2px;\"], p => p._css);\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv3\",\n  componentId: \"ocgq3-2\"\n})([\"line-height:1;width:\", \"px;& span{line-height:1;}\"], p => p._css2);\n\nvar _StyledSpan = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan\",\n  componentId: \"ocgq3-3\"\n})([\"\", \"\"], p => p._css3);\n\nvar _StyledSpan2 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan2\",\n  componentId: \"ocgq3-4\"\n})([\"\", \" color:\", \";\"], p => p._css4, p => p._css5);\n\nvar _StyledSpan3 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan3\",\n  componentId: \"ocgq3-5\"\n})([\"\", \";color:\", \";\"], p => p._css6, p => p._css7);\n\nvar _StyledDiv4 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv4\",\n  componentId: \"ocgq3-6\"\n})([\"background:\", \";height:\", \"px;border-radius:10px;\"], p => p._css8, p => p._css9);\n\nvar _StyledDiv5 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv5\",\n  componentId: \"ocgq3-7\"\n})([\"padding:\", \"px;\"], p => p._css10);\n\nvar _StyledDiv6 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv6\",\n  componentId: \"ocgq3-8\"\n})([\"display:flex;align-items:center;justify-content:space-between;\"]);\n\nvar _StyledDiv7 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv7\",\n  componentId: \"ocgq3-9\"\n})([\"display:flex;align-items:center;\"]);\n\nvar _StyledImg = _styled(\"img\").withConfig({\n  displayName: \"ClockModule___StyledImg\",\n  componentId: \"ocgq3-10\"\n})([\"margin-right:\", \"px;\"], p => p._css11);\n\nvar _StyledDiv8 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv8\",\n  componentId: \"ocgq3-11\"\n})([\"display:flex;align-items:center;\"]);\n\nvar _StyledSpan4 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan4\",\n  componentId: \"ocgq3-12\"\n})([\"margin-right:\", \"px;\"], p => p._css12);\n\nvar _StyledIconExternal = _styled(IconExternal).withConfig({\n  displayName: \"ClockModule___StyledIconExternal\",\n  componentId: \"ocgq3-13\"\n})([\"color:\", \";\"], p => p._css13);\n\nvar _StyledDiv9 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv9\",\n  componentId: \"ocgq3-14\"\n})([\"color:\", \";display:flex;align-items:center;margin-top:\", \"px;\"], p => p._css14, p => p._css15);\n\nvar _StyledSpan5 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan5\",\n  componentId: \"ocgq3-15\"\n})([\"\", \" text-transform:uppercase;\"], p => p._css16);\n\nvar _StyledDiv10 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv10\",\n  componentId: \"ocgq3-16\"\n})([\"margin-top:\", \"px;\"], p => p._css17);\n\nvar _StyledSpan6 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan6\",\n  componentId: \"ocgq3-17\"\n})([\"color:\", \";margin-right:\", \"px;\"], p => p._css18, p => p._css19);\n\nvar _StyledDiv11 = _styled(\"div\").withConfig({\n  displayName: \"ClockModule___StyledDiv11\",\n  componentId: \"ocgq3-18\"\n})([\"margin-top:\", \"px;\"], p => p._css20);\n\nvar _StyledSpan7 = _styled(\"span\").withConfig({\n  displayName: \"ClockModule___StyledSpan7\",\n  componentId: \"ocgq3-19\"\n})([\"\", \";color:\", \";\"], p => p._css21, p => p._css22);\n\nfunction ClockModule() {\n  const buttonRef = useRef();\n  const [opened, setOpened] = useState(false);\n  const theme = useTheme();\n  const wallet = useWallet();\n  const {\n    heartbeat: onHeartbeat\n  } = useHeartbeat();\n  const courtConfig = useCourtConfig();\n  const {\n    currentTermId,\n    currentTermEndDate,\n    isSynced,\n    neededTransitions\n  } = useCourtClock();\n  const toggle = useCallback(() => setOpened(opened => !opened), []);\n  const handlePopoverClose = useCallback(() => {\n    setOpened(false);\n  }, []);\n  const handleOnClick = useCallback(() => {\n    handlePopoverClose();\n    onHeartbeat(neededTransitions);\n  }, [handlePopoverClose, neededTransitions, onHeartbeat]);\n  const IconSync = isSynced ? IconCheck : IconCross;\n  return React.createElement(_StyledDiv, {\n    ref: buttonRef,\n    tabIndex: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(HeaderModule, {\n    icon: React.createElement(_StyledDiv2, {\n      _css: theme.background,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(IconClock, {\n      color: isSynced ? theme.positive : theme.negative,\n      width: 4.5 * GU,\n      height: 4.5 * GU,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })),\n    content: React.createElement(_StyledDiv3, {\n      _css2: 15 * GU,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, currentTermId ? React.createElement(React.Fragment, null, isSynced ? React.createElement(Timer, {\n      end: currentTermEndDate,\n      showIcon: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(_StyledSpan, {\n      _css3: textStyle('body2'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"00\"), ' ', React.createElement(_StyledSpan2, {\n      _css4: textStyle('body2'),\n      _css5: theme.contentSecondary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"S\")), React.createElement(_StyledSpan3, {\n      _css6: textStyle('body4'),\n      _css7: isSynced ? theme.contentSecondary : theme.negative,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, `Term ${isSynced ? 'is up-to-date' : 'needs updating'}`)) : React.createElement(_StyledDiv4, {\n      _css8: theme.background,\n      _css9: 5 * GU,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })),\n    onClick: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(HeaderPopover, {\n    animateHeight: false,\n    heading: \"Court clock\",\n    height: (isSynced ? 27.5 : 26) * GU,\n    width: 45 * GU,\n    onClose: handlePopoverClose,\n    opener: buttonRef.current,\n    visible: opened,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(_StyledDiv5, {\n    _css10: 2 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(_StyledDiv6, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(_StyledDiv7, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(_StyledImg, {\n    alt: \"\",\n    width: 28,\n    height: 28,\n    src: logoSvg,\n    _css11: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"Dijets Council\")), React.createElement(_StyledDiv8, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(_StyledSpan4, {\n    _css12: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, shortenAddress(courtConfig === null || courtConfig === void 0 ? void 0 : courtConfig.id)), React.createElement(ButtonBase, {\n    disabled: !courtConfig,\n    href: blockExplorerUrl('address', courtConfig === null || courtConfig === void 0 ? void 0 : courtConfig.id, {\n      networkType: isLocalOrUnknownNetwork() ? 'private' : getNetworkType()\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(_StyledIconExternal, {\n    _css13: theme.contentSecondary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })))), React.createElement(_StyledDiv9, {\n    _css14: isSynced ? theme.positive : theme.negative,\n    _css15: 1 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(IconSync, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }), React.createElement(_StyledSpan5, {\n    _css16: textStyle('body4'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, `Term ${isSynced ? 'is up-to-date' : 'needs updating'}`)), React.createElement(_StyledDiv10, {\n    _css17: 1 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, React.createElement(_StyledSpan6, {\n    _css18: theme.contentSecondary,\n    _css19: 0.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, isSynced ? 'Up to date' : 'Needs updating', \":\"), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, isSynced ? `Current term ${currentTermId}` : `Last term ${currentTermId - neededTransitions}`))), React.createElement(_StyledDiv11, {\n    _css20: 1.5 * GU,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, isSynced ? React.createElement(_StyledSpan7, {\n    _css21: textStyle('body3'),\n    _css22: theme.contentSecondary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, \"Term is the time unit for measuring Dijets Council phases. Each term lasts \", formatDuration(courtConfig.termDuration / 1000), \".\") : React.createElement(Button, {\n    label: \"Update term\",\n    mode: \"strong\",\n    wide: true,\n    disabled: !courtConfig || !wallet.account,\n    onClick: handleOnClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  })))));\n}\n\nexport default ClockModule;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/ClockModule.js"],"names":["React","useCallback","useRef","useState","blockExplorerUrl","Button","ButtonBase","GU","IconCheck","IconClock","IconCross","IconExternal","textStyle","Timer","useTheme","useWallet","HeaderModule","HeaderPopover","useCourtClock","useCourtConfig","useHeartbeat","formatDuration","getNetworkType","isLocalOrUnknownNetwork","shortenAddress","ClockModule","buttonRef","opened","setOpened","theme","wallet","heartbeat","onHeartbeat","courtConfig","currentTermId","currentTermEndDate","isSynced","neededTransitions","toggle","handlePopoverClose","handleOnClick","IconSync","background","positive","negative","contentSecondary","current","logoSvg","id","networkType","termDuration","account"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState } from 'react'\nimport {\n  blockExplorerUrl,\n  Button,\n  ButtonBase,\n  GU,\n  IconCheck,\n  IconClock,\n  IconCross,\n  IconExternal,\n  textStyle,\n  Timer,\n  useTheme,\n} from '@aragon/ui'\nimport { useWallet } from 'use-wallet'\n\nimport HeaderModule from './Header/HeaderModule'\nimport HeaderPopover from './Header/HeaderPopover'\nimport { useCourtClock } from '../providers/CourtClock'\nimport { useCourtConfig } from '../providers/CourtConfig'\nimport { useHeartbeat } from '../hooks/useCourtContracts'\n\nimport { formatDuration } from '../utils/date-utils'\nimport {\n  getNetworkType,\n  isLocalOrUnknownNetwork,\n  shortenAddress,\n} from '../lib/web3-utils'\n\nimport logoSvg from '../assets/LogoAccent.svg'\n\nfunction ClockModule() {\n  const buttonRef = useRef()\n  const [opened, setOpened] = useState(false)\n\n  const theme = useTheme()\n  const wallet = useWallet()\n  const { heartbeat: onHeartbeat } = useHeartbeat()\n  const courtConfig = useCourtConfig()\n\n  const {\n    currentTermId,\n    currentTermEndDate,\n    isSynced,\n    neededTransitions,\n  } = useCourtClock()\n\n  const toggle = useCallback(() => setOpened(opened => !opened), [])\n\n  const handlePopoverClose = useCallback(() => {\n    setOpened(false)\n  }, [])\n\n  const handleOnClick = useCallback(() => {\n    handlePopoverClose()\n\n    onHeartbeat(neededTransitions)\n  }, [handlePopoverClose, neededTransitions, onHeartbeat])\n\n  const IconSync = isSynced ? IconCheck : IconCross\n\n  return (\n    <div\n      ref={buttonRef}\n      tabIndex=\"0\"\n      css={`\n        display: flex;\n        align-items: center;\n        justify-content: space-around;\n        outline: 0;\n      `}\n    >\n      <HeaderModule\n        icon={\n          <div\n            css={`\n              background-color: ${theme.background};\n              display: flex;\n              border-radius: 50%;\n              padding: 2px;\n            `}\n          >\n            <IconClock\n              color={isSynced ? theme.positive : theme.negative}\n              width={4.5 * GU}\n              height={4.5 * GU}\n            />\n          </div>\n        }\n        content={\n          <div\n            css={`\n              line-height: 1;\n              width: ${15 * GU}px;\n\n              & span {\n                line-height: 1;\n              }\n            `}\n          >\n            {currentTermId ? (\n              <>\n                {isSynced ? (\n                  <Timer end={currentTermEndDate} showIcon={false} />\n                ) : (\n                  <div>\n                    <span\n                      css={`\n                        ${textStyle('body2')}\n                      `}\n                    >\n                      00\n                    </span>{' '}\n                    <span\n                      css={`\n                        ${textStyle('body2')}\n                        color: ${theme.contentSecondary};\n                      `}\n                    >\n                      S\n                    </span>\n                  </div>\n                )}\n                <span\n                  css={`\n                    ${textStyle('body4')};\n                    color: ${isSynced\n                      ? theme.contentSecondary\n                      : theme.negative};\n                  `}\n                >\n                  {`Term ${isSynced ? 'is up-to-date' : 'needs updating'}`}\n                </span>\n              </>\n            ) : (\n              <div\n                css={`\n                  background: ${theme.background};\n                  height: ${5 * GU}px;\n                  border-radius: 10px;\n                `}\n              />\n            )}\n          </div>\n        }\n        onClick={toggle}\n      />\n\n      <HeaderPopover\n        animateHeight={false}\n        heading=\"Court clock\"\n        height={(isSynced ? 27.5 : 26) * GU}\n        width={45 * GU}\n        onClose={handlePopoverClose}\n        opener={buttonRef.current}\n        visible={opened}\n      >\n        <div\n          css={`\n            padding: ${2 * GU}px;\n          `}\n        >\n          <div\n            css={`\n              display: flex;\n              align-items: center;\n              justify-content: space-between;\n            `}\n          >\n            <div\n              css={`\n                display: flex;\n                align-items: center;\n              `}\n            >\n              <img\n                alt=\"\"\n                width={28}\n                height={28}\n                src={logoSvg}\n                css={`\n                  margin-right: ${0.5 * GU}px;\n                `}\n              />\n              <span>Dijets Council</span>\n            </div>\n            <div\n              css={`\n                display: flex;\n                align-items: center;\n              `}\n            >\n              <span\n                css={`\n                  margin-right: ${0.5 * GU}px;\n                `}\n              >\n                {shortenAddress(courtConfig?.id)}\n              </span>\n              <ButtonBase\n                disabled={!courtConfig}\n                href={blockExplorerUrl('address', courtConfig?.id, {\n                  networkType: isLocalOrUnknownNetwork()\n                    ? 'private'\n                    : getNetworkType(),\n                })}\n              >\n                <IconExternal\n                  css={`\n                    color: ${theme.contentSecondary};\n                  `}\n                />\n              </ButtonBase>\n            </div>\n          </div>\n          <div\n            css={`\n              color: ${isSynced ? theme.positive : theme.negative};\n              display: flex;\n              align-items: center;\n              margin-top: ${1 * GU}px;\n            `}\n          >\n            <IconSync />\n            <span\n              css={`\n                ${textStyle('body4')}\n                text-transform: uppercase;\n              `}\n            >\n              {`Term ${isSynced ? 'is up-to-date' : 'needs updating'}`}\n            </span>\n          </div>\n          <div\n            css={`\n              margin-top: ${1 * GU}px;\n            `}\n          >\n            <span>\n              <span\n                css={`\n                  color: ${theme.contentSecondary};\n                  margin-right: ${0.5 * GU}px;\n                `}\n              >\n                {isSynced ? 'Up to date' : 'Needs updating'}:\n              </span>\n              <span>\n                {isSynced\n                  ? `Current term ${currentTermId}`\n                  : `Last term ${currentTermId - neededTransitions}`}\n              </span>\n            </span>\n          </div>\n          <div\n            css={`\n              margin-top: ${1.5 * GU}px;\n            `}\n          >\n            {isSynced ? (\n              <span\n                css={`\n                  ${textStyle('body3')};\n                  color: ${theme.contentSecondary};\n                `}\n              >\n                Term is the time unit for measuring Dijets Council phases. Each\n                term lasts {formatDuration(courtConfig.termDuration / 1000)}.\n              </span>\n            ) : (\n              <Button\n                label=\"Update term\"\n                mode=\"strong\"\n                wide\n                disabled={!courtConfig || !wallet.account}\n                onClick={handleOnClick}\n              />\n            )}\n          </div>\n        </div>\n      </HeaderPopover>\n    </div>\n  )\n}\n\nexport default ClockModule\n"]},"metadata":{},"sourceType":"module"}