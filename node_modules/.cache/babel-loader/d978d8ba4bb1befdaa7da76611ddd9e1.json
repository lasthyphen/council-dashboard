{"ast":null,"code":"import _slicedToArray from\"/Users/saleemfareed/oneds/court-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled12 from\"styled-components\";import _styled11 from\"styled-components\";import _styled10 from\"styled-components\";import _styled9 from\"styled-components\";import _styled8 from\"styled-components\";import _styled7 from\"styled-components\";import _styled6 from\"styled-components\";import _styled5 from\"styled-components\";import _styled4 from\"styled-components\";import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import React,{useCallback}from'react';import PropTypes from'prop-types';import{ButtonBase,ButtonIcon,IconCross,IconCheck,GU,blockExplorerUrl,textStyle,useTheme,IdentityBadge}from'@aragon/ui';import{transformAddresses,getNetworkType}from'../../lib/web3-utils';import{ACTIVITY_STATUS_PENDING,ACTIVITY_STATUS_CONFIRMED,ACTIVITY_STATUS_FAILED,ACTIVITY_STATUS_TIMED_OUT}from'./activity-statuses';import TransactionProgress from'./TransactionProgress';import{useActivity}from'../../providers/ActivityProvider';import{getActivityData}from'./activity-types';import TimeTag from'./TimeTag';var _StyledDiv=_styled(\"div\").withConfig({displayName:\"ActivityItem___StyledDiv\",componentId:\"sc-1p7wekt-0\"})([\"position:relative;\"]);var _StyledButtonBase=_styled(ButtonBase).withConfig({displayName:\"ActivityItem___StyledButtonBase\",componentId:\"sc-1p7wekt-1\"})([\"text-align:left;width:100%;\"]);var _StyledSection=_styled(\"section\").withConfig({displayName:\"ActivityItem___StyledSection\",componentId:\"sc-1p7wekt-2\"})([\"display:flex;flex-direction:column;overflow:hidden;padding:\",\"px;background:\",\";transition-property:background;transition-duration:50ms;transition-timing-function:ease-in-out;&:active{background:\",\";}\"],function(p){return p._css;},function(p){return p._css2;},function(p){return p._css3;});var _StyledH=_styled(\"h1\").withConfig({displayName:\"ActivityItem___StyledH\",componentId:\"sc-1p7wekt-3\"})([\"display:flex;align-items:center;\"]);var _StyledDiv2=_styled(\"div\").withConfig({displayName:\"ActivityItem___StyledDiv2\",componentId:\"sc-1p7wekt-4\"})([\"flex-shrink:0;display:flex;margin-right:\",\"px;\"],function(p){return p._css4;});var _StyledDiv3=_styled(\"div\").withConfig({displayName:\"ActivityItem___StyledDiv3\",componentId:\"sc-1p7wekt-5\"})([\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:\",\";\",\";\"],function(p){return p._css5;},function(p){return p._css6;});var _StyledTimeTag=_styled(TimeTag).withConfig({displayName:\"ActivityItem___StyledTimeTag\",componentId:\"sc-1p7wekt-6\"})([\"margin:0 \",\"px;\"],function(p){return p._css7;});var _StyledDiv4=_styled(\"div\").withConfig({displayName:\"ActivityItem___StyledDiv4\",componentId:\"sc-1p7wekt-7\"})([\"position:relative;margin-top:\",\"px;\"],function(p){return p._css8;});var _StyledButtonIcon=_styled(ButtonIcon).withConfig({displayName:\"ActivityItem___StyledButtonIcon\",componentId:\"sc-1p7wekt-8\"})([\"position:absolute;top:\",\"px;right:\",\"px;z-index:1;\"],function(p){return p._css9;},function(p){return p._css10;});var _StyledIconCross=_styled(IconCross).withConfig({displayName:\"ActivityItem___StyledIconCross\",componentId:\"sc-1p7wekt-9\"})([\"color:\",\";\"],function(p){return p._css11;});function ActivityItem(_ref){var activity=_ref.activity;var theme=useTheme();var _useActivity=useActivity(),removeActivity=_useActivity.removeActivity;var _getActivityData=getActivityData(activity.type),icon=_getActivityData.icon,title=_getActivityData.title;var handleOpen=useCallback(function(){if(activity.transactionHash){window.open(blockExplorerUrl('transaction',activity.transactionHash,{networkType:getNetworkType()}),'_blank','noopener');}},[activity]);var canClear=activity.status!==ACTIVITY_STATUS_PENDING;var handleClose=useCallback(function(){if(activity.transactionHash){removeActivity(activity.transactionHash);}},[activity,removeActivity]);return React.createElement(_StyledDiv,null,React.createElement(_StyledButtonBase,{element:\"div\",onClick:handleOpen},React.createElement(_StyledSection,{_css:2*GU,_css2:activity.read?theme.surface:theme.surfaceHighlight,_css3:theme.surfaceUnder},React.createElement(_StyledH,null,React.createElement(_StyledDiv2,{_css4:1*GU},React.createElement(\"img\",{src:icon,alt:\"\"})),React.createElement(_StyledDiv3,{_css5:theme.surfaceContent,_css6:textStyle('body1')},title),activity.status!==ACTIVITY_STATUS_PENDING&&React.createElement(_StyledTimeTag,{date:activity.createdAt,_css7:1.5*GU})),React.createElement(_StyledDiv4,{_css8:2*GU},React.createElement(ItemContent,{text:activity.description}),React.createElement(StatusMessage,{activity:activity}),React.createElement(TransactionProgress,{status:activity.status,createdAt:activity.createdAt})))),canClear&&React.createElement(_StyledButtonIcon,{label:\"Remove\",onClick:handleClose,_css9:1*GU,_css10:1*GU},React.createElement(_StyledIconCross,{_css11:theme.surfaceIcon})));}var _StyledP=_styled(\"p\").withConfig({displayName:\"ActivityItem___StyledP\",componentId:\"sc-1p7wekt-10\"})([\"display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal;word-break:break-word;overflow:hidden;\",\"\"],function(p){return p._css12;});var ItemContent=React.memo(function(_ref2){var _ref2$text=_ref2.text,text=_ref2$text===void 0?'':_ref2$text;return React.createElement(_StyledP,{_css12:textStyle('body2')},transformAddresses(text,function(part,isAddress,index){return isAddress?React.createElement(\"span\",{title:part,key:index},React.createElement(IdentityBadge,{entity:part,compact:true})):React.createElement(\"span\",{key:index},part);}));},function(prevProps,nextProps){return prevProps.text===nextProps.text;});ItemContent.propTypes={text:PropTypes.string.isRequired};function getStatusData(activity,theme){if(activity.status===ACTIVITY_STATUS_CONFIRMED){return[React.createElement(IconCheck,{size:\"small\"}),React.createElement(\"span\",null,\"Transaction confirmed\"),theme.positive];}if(activity.status===ACTIVITY_STATUS_FAILED){return[React.createElement(IconCross,{size:\"small\"}),React.createElement(\"span\",null,\"Transaction failed\"),theme.negative];}if(activity.status===ACTIVITY_STATUS_TIMED_OUT){return[React.createElement(IconCross,{size:\"small\"}),React.createElement(\"span\",null,\"Transaction timed out\"),theme.negative];}return[null,React.createElement(\"span\",null,\"Transaction pending\"),theme.surfaceContentSecondary];}var _StyledDiv5=_styled(\"div\").withConfig({displayName:\"ActivityItem___StyledDiv5\",componentId:\"sc-1p7wekt-11\"})([\"display:flex;align-items:center;margin-top:\",\"px;\",\" color:\",\"\"],function(p){return p._css13;},function(p){return p._css14;},function(p){return p._css15;});var StatusMessage=function StatusMessage(_ref3){var activity=_ref3.activity;var theme=useTheme();var _getStatusData=getStatusData(activity,theme),_getStatusData2=_slicedToArray(_getStatusData,3),icon=_getStatusData2[0],content=_getStatusData2[1],color=_getStatusData2[2];return React.createElement(_StyledDiv5,{_css13:2*GU,_css14:textStyle('label2'),_css15:color},icon,content);};export default ActivityItem;","map":{"version":3,"sources":["/Users/saleemfareed/oneds/court-dashboard/src/components/Activity/ActivityItem.js"],"names":["React","useCallback","PropTypes","ButtonBase","ButtonIcon","IconCross","IconCheck","GU","blockExplorerUrl","textStyle","useTheme","IdentityBadge","transformAddresses","getNetworkType","ACTIVITY_STATUS_PENDING","ACTIVITY_STATUS_CONFIRMED","ACTIVITY_STATUS_FAILED","ACTIVITY_STATUS_TIMED_OUT","TransactionProgress","useActivity","getActivityData","TimeTag","ActivityItem","activity","theme","removeActivity","type","icon","title","handleOpen","transactionHash","window","open","networkType","canClear","status","handleClose","read","surface","surfaceHighlight","surfaceUnder","surfaceContent","createdAt","description","surfaceIcon","ItemContent","memo","text","part","isAddress","index","prevProps","nextProps","propTypes","string","isRequired","getStatusData","positive","negative","surfaceContentSecondary","StatusMessage","content","color"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  ButtonBase,\n  ButtonIcon,\n  IconCross,\n  IconCheck,\n  GU,\n  blockExplorerUrl,\n  textStyle,\n  useTheme,\n  IdentityBadge,\n} from '@aragon/ui'\nimport { transformAddresses, getNetworkType } from '../../lib/web3-utils'\nimport {\n  ACTIVITY_STATUS_PENDING,\n  ACTIVITY_STATUS_CONFIRMED,\n  ACTIVITY_STATUS_FAILED,\n  ACTIVITY_STATUS_TIMED_OUT,\n} from './activity-statuses'\nimport TransactionProgress from './TransactionProgress'\nimport { useActivity } from '../../providers/ActivityProvider'\nimport { getActivityData } from './activity-types'\nimport TimeTag from './TimeTag'\n\nfunction ActivityItem({ activity }) {\n  const theme = useTheme()\n  const { removeActivity } = useActivity()\n\n  const { icon, title } = getActivityData(activity.type)\n\n  const handleOpen = useCallback(() => {\n    if (activity.transactionHash) {\n      window.open(\n        blockExplorerUrl('transaction', activity.transactionHash, {\n          networkType: getNetworkType(),\n        }),\n        '_blank',\n        'noopener'\n      )\n    }\n  }, [activity])\n\n  const canClear = activity.status !== ACTIVITY_STATUS_PENDING\n\n  const handleClose = useCallback(() => {\n    if (activity.transactionHash) {\n      removeActivity(activity.transactionHash)\n    }\n  }, [activity, removeActivity])\n\n  return (\n    <div\n      css={`\n        position: relative;\n      `}\n    >\n      <ButtonBase\n        element=\"div\"\n        onClick={handleOpen}\n        css={`\n          text-align: left;\n          width: 100%;\n        `}\n      >\n        <section\n          css={`\n            display: flex;\n            flex-direction: column;\n            overflow: hidden;\n            padding: ${2 * GU}px;\n            background: ${activity.read\n              ? theme.surface\n              : theme.surfaceHighlight};\n            transition-property: background;\n            transition-duration: 50ms;\n            transition-timing-function: ease-in-out;\n\n            &:active {\n              background: ${theme.surfaceUnder};\n            }\n          `}\n        >\n          <h1\n            css={`\n              display: flex;\n              align-items: center;\n            `}\n          >\n            <div\n              css={`\n                flex-shrink: 0;\n                display: flex;\n                margin-right: ${1 * GU}px;\n              `}\n            >\n              <img src={icon} alt=\"\" />\n            </div>\n            <div\n              css={`\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                color: ${theme.surfaceContent};\n                ${textStyle('body1')};\n              `}\n            >\n              {title}\n            </div>\n            {activity.status !== ACTIVITY_STATUS_PENDING && (\n              <TimeTag\n                date={activity.createdAt}\n                css={`\n                  margin: 0 ${1.5 * GU}px;\n                `}\n              />\n            )}\n          </h1>\n          <div\n            css={`\n              position: relative;\n              margin-top: ${2 * GU}px;\n            `}\n          >\n            <ItemContent text={activity.description} />\n            <StatusMessage activity={activity} />\n            <TransactionProgress\n              status={activity.status}\n              createdAt={activity.createdAt}\n            />\n          </div>\n        </section>\n      </ButtonBase>\n      {canClear && (\n        <ButtonIcon\n          label=\"Remove\"\n          onClick={handleClose}\n          css={`\n            position: absolute;\n            top: ${1 * GU}px;\n            right: ${1 * GU}px;\n            z-index: 1;\n          `}\n        >\n          <IconCross\n            css={`\n              color: ${theme.surfaceIcon};\n            `}\n          />\n        </ButtonIcon>\n      )}\n    </div>\n  )\n}\n\nActivityItem.propTypes = {\n  activity: PropTypes.object.isRequired,\n}\n\nconst ItemContent = React.memo(\n  ({ text = '' }) => (\n    <p\n      css={`\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 2;\n        white-space: normal;\n        word-break: break-word;\n        overflow: hidden;\n        ${textStyle('body2')}\n      `}\n    >\n      {transformAddresses(text, (part, isAddress, index) =>\n        isAddress ? (\n          <span title={part} key={index}>\n            <IdentityBadge entity={part} compact />\n          </span>\n        ) : (\n          <span key={index}>{part}</span>\n        )\n      )}\n    </p>\n  ),\n  (prevProps, nextProps) => prevProps.text === nextProps.text\n)\n\nItemContent.propTypes = {\n  text: PropTypes.string.isRequired,\n}\n\nfunction getStatusData(activity, theme) {\n  if (activity.status === ACTIVITY_STATUS_CONFIRMED) {\n    return [\n      <IconCheck size=\"small\" />,\n      <span>Transaction confirmed</span>,\n      theme.positive,\n    ]\n  }\n  if (activity.status === ACTIVITY_STATUS_FAILED) {\n    return [\n      <IconCross size=\"small\" />,\n      <span>Transaction failed</span>,\n      theme.negative,\n    ]\n  }\n  if (activity.status === ACTIVITY_STATUS_TIMED_OUT) {\n    return [\n      <IconCross size=\"small\" />,\n      <span>Transaction timed out</span>,\n      theme.negative,\n    ]\n  }\n  return [null, <span>Transaction pending</span>, theme.surfaceContentSecondary]\n}\n\nconst StatusMessage = ({ activity }) => {\n  const theme = useTheme()\n  const [icon, content, color] = getStatusData(activity, theme)\n  return (\n    <div\n      css={`\n        display: flex;\n        align-items: center;\n        margin-top: ${2 * GU}px;\n        ${textStyle('label2')}\n        color: ${color}\n      `}\n    >\n      {icon}\n      {content}\n    </div>\n  )\n}\n\nStatusMessage.propTypes = {\n  activity: PropTypes.object.isRequired,\n}\n\nexport default ActivityItem\n"]},"metadata":{},"sourceType":"module"}