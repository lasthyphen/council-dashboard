"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./index-dddbd19e.js"),t=require("wonka");var r=require("./core.js"),n=require("react"),a=require("react-wonka"),u=r.createClient({url:"/graphql"}),s=n.createContext(u),o=s.Provider,c=s.Consumer,i=function(){return n.useContext(s)},x={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0},l=function(r){var a=i(),u=n.useState(x),s=u[1];function o(e){return s({fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions}),e}return[u[0],n.useCallback(function(n,u){s(e._extends(e._extends({},x),{fetching:!0}));var c=e.createRequest(r,n);return t.toPromise(a.executeMutation(c,u||{})).then(o)},[a,r,s])]},d=function(t,r){var a=n.useRef(void 0);return n.useMemo(function(){var n=e.createRequest(t,r);return void 0!==a.current&&a.current.key===n.key?a.current:(a.current=n,n)},[t,r])};function f(t,r){return e._extends(e._extends(e._extends({},t),{stale:!1}),r)}function p(e){return{fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions}}function h(e){return e?t.concat([t.fromValue({fetching:!0}),t.map(p)(e),t.fromValue({fetching:!1})]):t.fromValue({fetching:!1})}function g(e){return t.scan(f,x)(t.switchMap(h)(e))}var v=function(t){var r=i(),u=d(t.query,t.variables),s=n.useCallback(function(n){return r.executeQuery(u,e._extends(e._extends({requestPolicy:t.requestPolicy,pollInterval:t.pollInterval},t.context),n))},[r,u,t.requestPolicy,t.pollInterval,t.context]),o=a.useOperator(g,n.useMemo(function(){return t.pause?null:s()},[t.pause,s]),x),c=o[1];return[o[0],n.useCallback(function(e){return c(s(e))},[c,s])]};function m(e){return{fetching:!0,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions}}function b(e){return e?t.concat([t.fromValue({fetching:!0}),t.map(m)(e),t.fromValue({fetching:!1})]):t.fromValue({fetching:!1})}var E=function(r,u){var s=i(),o=n.useRef(u);o.current=u;var c=d(r.query,r.variables),l=n.useCallback(function(t){return s.executeSubscription(c,e._extends(e._extends({},r.context),t))},[s,c,r.context]);function f(t,r){var n=o.current,a=void 0!==r.data?"function"==typeof n?n(t.data,r.data):r.data:t.data;return e._extends(e._extends(e._extends(e._extends({},t),{stale:!1}),r),{data:a})}var p=a.useOperator(function(e){return t.scan(f,x)(t.switchMap(b)(e))},n.useMemo(function(){return r.pause?null:l()},[r.pause,l]),x),h=p[1];return[p[0],n.useCallback(function(e){return h(l(e))},[h,l])]};exports.CombinedError=e.CombinedError,exports.createRequest=e.createRequest,exports.formatDocument=e.formatDocument,exports.makeErrorResult=e.makeErrorResult,exports.makeResult=e.makeResult,exports.stringifyVariables=e.stringifyVariables,exports.Client=r.Client,exports.cacheExchange=r.cacheExchange,exports.composeExchanges=r.composeExchanges,exports.createClient=r.createClient,exports.debugExchange=r.debugExchange,exports.dedupExchange=r.dedupExchange,exports.defaultExchanges=r.defaultExchanges,exports.fallbackExchangeIO=r.fallbackExchangeIO,exports.fetchExchange=r.fetchExchange,exports.ssrExchange=r.ssrExchange,exports.subscriptionExchange=r.subscriptionExchange,exports.Consumer=c,exports.Context=s,exports.Mutation=function(t){var r=l(t.query),n=r[1];return t.children(e._extends(e._extends({},r[0]),{executeMutation:n}))},exports.Provider=o,exports.Query=function(t){var r=v(t),n=r[1];return t.children(e._extends(e._extends({},r[0]),{executeQuery:n}))},exports.Subscription=function(t){var r=E(t,t.handler),n=r[1];return t.children(e._extends(e._extends({},r[0]),{executeSubscription:n}))},exports.useClient=i,exports.useMutation=l,exports.useQuery=v,exports.useSubscription=E;